function cov_gyfd109ik(){var path="/Users/mac/bootcamp/collab/skylab-bootcamp-202004/staff/sergi-ramos/coohappy/coohappy-client-logic/register-cohousing.js";var hash="2ab6b3fb2e9c5c2c43f4f763976b92c62bcd7a21";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/mac/bootcamp/collab/skylab-bootcamp-202004/staff/sergi-ramos/coohappy/coohappy-client-logic/register-cohousing.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:44}},"1":{start:{line:2,column:28},end:{line:2,column:55}},"2":{start:{line:3,column:16},end:{line:3,column:36}},"3":{start:{line:5,column:0},end:{line:35,column:15}},"4":{start:{line:7,column:4},end:{line:7,column:29}},"5":{start:{line:8,column:4},end:{line:8,column:33}},"6":{start:{line:9,column:4},end:{line:9,column:35}},"7":{start:{line:10,column:4},end:{line:10,column:84}},"8":{start:{line:10,column:36},end:{line:10,column:84}},"9":{start:{line:11,column:4},end:{line:11,column:92}},"10":{start:{line:11,column:40},end:{line:11,column:92}},"11":{start:{line:12,column:4},end:{line:12,column:33}},"12":{start:{line:13,column:4},end:{line:13,column:36}},"13":{start:{line:18,column:4},end:{line:34,column:8}},"14":{start:{line:20,column:22},end:{line:20,column:57}},"15":{start:{line:22,column:25},end:{line:26,column:87}},"16":{start:{line:28,column:25},end:{line:28,column:33}},"17":{start:{line:29,column:8},end:{line:29,column:35}},"18":{start:{line:29,column:28},end:{line:29,column:35}},"19":{start:{line:31,column:26},end:{line:31,column:51}},"20":{start:{line:33,column:8},end:{line:33,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:17},end:{line:5,column:18}},loc:{start:{line:5,column:79},end:{line:35,column:1}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:18,column:12},end:{line:18,column:13}},loc:{start:{line:18,column:24},end:{line:34,column:5}},line:18}},branchMap:{"0":{loc:{start:{line:10,column:4},end:{line:10,column:84}},type:"if",locations:[{start:{line:10,column:4},end:{line:10,column:84}},{start:{line:10,column:4},end:{line:10,column:84}}],line:10},"1":{loc:{start:{line:11,column:4},end:{line:11,column:92}},type:"if",locations:[{start:{line:11,column:4},end:{line:11,column:92}},{start:{line:11,column:4},end:{line:11,column:92}}],line:11},"2":{loc:{start:{line:29,column:8},end:{line:29,column:35}},type:"if",locations:[{start:{line:29,column:8},end:{line:29,column:35}},{start:{line:29,column:8},end:{line:29,column:35}}],line:29}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2ab6b3fb2e9c5c2c43f4f763976b92c62bcd7a21"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_gyfd109ik=function(){return actualCoverage;};}return actualCoverage;}cov_gyfd109ik();cov_gyfd109ik().s[0]++;require('coohappy-commons/polyfills/string');const{utils:{call}}=(cov_gyfd109ik().s[1]++,require('coohappy-commons'));const context=(cov_gyfd109ik().s[2]++,require('./context'));cov_gyfd109ik().s[3]++;module.exports=function(name,{street,number,city,country},laundryNum){cov_gyfd109ik().f[0]++;cov_gyfd109ik().s[4]++;number=parseInt(number);cov_gyfd109ik().s[5]++;String.validate.notVoid(name);cov_gyfd109ik().s[6]++;String.validate.notVoid(street);cov_gyfd109ik().s[7]++;if(typeof number!=='number'){cov_gyfd109ik().b[0][0]++;cov_gyfd109ik().s[8]++;throw new TypeError(`${number} is not a number`);}else{cov_gyfd109ik().b[0][1]++;}cov_gyfd109ik().s[9]++;if(typeof laundryNum!=='number'){cov_gyfd109ik().b[1][0]++;cov_gyfd109ik().s[10]++;throw new TypeError(`${laundryNum} is not a number`);}else{cov_gyfd109ik().b[1][1]++;}cov_gyfd109ik().s[11]++;String.validate.notVoid(city);cov_gyfd109ik().s[12]++;String.validate.notVoid(country);//TODO admin can change this value
cov_gyfd109ik().s[13]++;return(async()=>{cov_gyfd109ik().f[1]++;const token=(cov_gyfd109ik().s[14]++,await this.storage.getItem('TOKEN'));const response=(cov_gyfd109ik().s[15]++,await call('POST',`${this.API_URL}/cohousings`,JSON.stringify({name,address:{street,number,city,country},laundryNum}),{'Content-type':'application/json','Authorization':`Bearer ${token}`}));const{status}=(cov_gyfd109ik().s[16]++,response);cov_gyfd109ik().s[17]++;if(status===201){cov_gyfd109ik().b[2][0]++;cov_gyfd109ik().s[18]++;return;}else{cov_gyfd109ik().b[2][1]++;}const{error}=(cov_gyfd109ik().s[19]++,JSON.parse(response.body));cov_gyfd109ik().s[20]++;throw new Error(error);})();}.bind(context);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZ2lzdGVyLWNvaG91c2luZy5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwidXRpbHMiLCJjYWxsIiwiY29udGV4dCIsIm1vZHVsZSIsImV4cG9ydHMiLCJuYW1lIiwic3RyZWV0IiwibnVtYmVyIiwiY2l0eSIsImNvdW50cnkiLCJsYXVuZHJ5TnVtIiwicGFyc2VJbnQiLCJTdHJpbmciLCJ2YWxpZGF0ZSIsIm5vdFZvaWQiLCJUeXBlRXJyb3IiLCJ0b2tlbiIsInN0b3JhZ2UiLCJnZXRJdGVtIiwicmVzcG9uc2UiLCJBUElfVVJMIiwiSlNPTiIsInN0cmluZ2lmeSIsImFkZHJlc3MiLCJzdGF0dXMiLCJlcnJvciIsInBhcnNlIiwiYm9keSIsIkVycm9yIiwiYmluZCJdLCJtYXBwaW5ncyI6IjAzRkFlWTtnSEFmWkEsT0FBTyxDQUFDLG1DQUFELENBQVAsQ0FDQSxLQUFNLENBQUVDLEtBQUssQ0FBRSxDQUFFQyxJQUFGLENBQVQsMEJBQXNCRixPQUFPLENBQUMsa0JBQUQsQ0FBN0IsQ0FBTixDQUNBLEtBQU1HLENBQUFBLE9BQU8seUJBQUdILE9BQU8sQ0FBQyxXQUFELENBQVYsQ0FBYixDLHVCQUVBSSxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsU0FBU0MsSUFBVCxDQUFlLENBQUVDLE1BQUYsQ0FBVUMsTUFBVixDQUFrQkMsSUFBbEIsQ0FBd0JDLE9BQXhCLENBQWYsQ0FBa0RDLFVBQWxELENBQThELCtDQUUzRUgsTUFBTSxDQUFHSSxRQUFRLENBQUNKLE1BQUQsQ0FBakIsQ0FGMkUsdUJBRzNFSyxNQUFNLENBQUNDLFFBQVAsQ0FBZ0JDLE9BQWhCLENBQXdCVCxJQUF4QixFQUgyRSx1QkFJM0VPLE1BQU0sQ0FBQ0MsUUFBUCxDQUFnQkMsT0FBaEIsQ0FBd0JSLE1BQXhCLEVBSjJFLHVCQUszRSxHQUFJLE1BQU9DLENBQUFBLE1BQVAsR0FBa0IsUUFBdEIsQ0FBZ0MsdURBQU0sSUFBSVEsQ0FBQUEsU0FBSixDQUFlLEdBQUVSLE1BQU8sa0JBQXhCLENBQU4sQ0FBZ0QsQ0FBaEYsZ0NBTDJFLHVCQU0zRSxHQUFJLE1BQU9HLENBQUFBLFVBQVAsR0FBc0IsUUFBMUIsQ0FBb0Msd0RBQU0sSUFBSUssQ0FBQUEsU0FBSixDQUFlLEdBQUVMLFVBQVcsa0JBQTVCLENBQU4sQ0FBb0QsQ0FBeEYsZ0NBTjJFLHdCQU8zRUUsTUFBTSxDQUFDQyxRQUFQLENBQWdCQyxPQUFoQixDQUF3Qk4sSUFBeEIsRUFQMkUsd0JBUTNFSSxNQUFNLENBQUNDLFFBQVAsQ0FBZ0JDLE9BQWhCLENBQXdCTCxPQUF4QixFQUdBO0FBWDJFLHdCQWEzRSxNQUFPLENBQUMsU0FBWSx3QkFFaEIsS0FBTU8sQ0FBQUEsS0FBSywwQkFBRyxLQUFNLE1BQUtDLE9BQUwsQ0FBYUMsT0FBYixDQUFxQixPQUFyQixDQUFULENBQVgsQ0FFQSxLQUFNQyxDQUFBQSxRQUFRLDBCQUFHLEtBQU1sQixDQUFBQSxJQUFJLENBQ3ZCLE1BRHVCLENBRXRCLEdBQUUsS0FBS21CLE9BQVEsYUFGTyxDQUd2QkMsSUFBSSxDQUFDQyxTQUFMLENBQWUsQ0FBRWpCLElBQUYsQ0FBUWtCLE9BQU8sQ0FBRSxDQUFFakIsTUFBRixDQUFVQyxNQUFWLENBQWtCQyxJQUFsQixDQUF3QkMsT0FBeEIsQ0FBakIsQ0FBb0RDLFVBQXBELENBQWYsQ0FIdUIsQ0FJdkIsQ0FBRSxlQUFnQixrQkFBbEIsQ0FBc0MsZ0JBQWtCLFVBQVNNLEtBQU0sRUFBdkUsQ0FKdUIsQ0FBYixDQUFkLENBTUEsS0FBTSxDQUFDUSxNQUFELDJCQUFXTCxRQUFYLENBQU4sQ0FWZ0Isd0JBV2hCLEdBQUlLLE1BQU0sR0FBSyxHQUFmLENBQW9CLDBEQUFPLENBQTNCLGdDQUVBLEtBQU0sQ0FBRUMsS0FBRiwyQkFBWUosSUFBSSxDQUFDSyxLQUFMLENBQVdQLFFBQVEsQ0FBQ1EsSUFBcEIsQ0FBWixDQUFOLENBYmdCLHdCQWVoQixLQUFNLElBQUlDLENBQUFBLEtBQUosQ0FBVUgsS0FBVixDQUFOLENBQ0gsQ0FoQk0sR0FBUCxDQWlCSCxDQTlCZ0IsQ0E4QmZJLElBOUJlLENBOEJWM0IsT0E5QlUsQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdjb29oYXBweS1jb21tb25zL3BvbHlmaWxscy9zdHJpbmcnKVxuY29uc3QgeyB1dGlsczogeyBjYWxsIH0gfSA9IHJlcXVpcmUoJ2Nvb2hhcHB5LWNvbW1vbnMnKVxuY29uc3QgY29udGV4dCA9IHJlcXVpcmUoJy4vY29udGV4dCcpXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obmFtZSwgeyBzdHJlZXQsIG51bWJlciwgY2l0eSwgY291bnRyeSB9LCBsYXVuZHJ5TnVtKSB7XG5cbiAgICBudW1iZXIgPSBwYXJzZUludChudW1iZXIpXG4gICAgU3RyaW5nLnZhbGlkYXRlLm5vdFZvaWQobmFtZSlcbiAgICBTdHJpbmcudmFsaWRhdGUubm90Vm9pZChzdHJlZXQpXG4gICAgaWYgKHR5cGVvZiBudW1iZXIgIT09ICdudW1iZXInKSB0aHJvdyBuZXcgVHlwZUVycm9yKGAke251bWJlcn0gaXMgbm90IGEgbnVtYmVyYClcbiAgICBpZiAodHlwZW9mIGxhdW5kcnlOdW0gIT09ICdudW1iZXInKSB0aHJvdyBuZXcgVHlwZUVycm9yKGAke2xhdW5kcnlOdW19IGlzIG5vdCBhIG51bWJlcmApXG4gICAgU3RyaW5nLnZhbGlkYXRlLm5vdFZvaWQoY2l0eSlcbiAgICBTdHJpbmcudmFsaWRhdGUubm90Vm9pZChjb3VudHJ5KVxuXG5cbiAgICAvL1RPRE8gYWRtaW4gY2FuIGNoYW5nZSB0aGlzIHZhbHVlXG5cbiAgICByZXR1cm4gKGFzeW5jICgpID0+IHtcblxuICAgICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IHRoaXMuc3RvcmFnZS5nZXRJdGVtKCdUT0tFTicpXG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjYWxsKFxuICAgICAgICAgICAgJ1BPU1QnLFxuICAgICAgICAgICAgYCR7dGhpcy5BUElfVVJMfS9jb2hvdXNpbmdzYCxcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgYWRkcmVzczogeyBzdHJlZXQsIG51bWJlciwgY2l0eSwgY291bnRyeSB9LCBsYXVuZHJ5TnVtIH0pLFxuICAgICAgICAgICAgeyAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLCAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gIH0pXG4gICAgICAgIFxuICAgICAgICBjb25zdCB7c3RhdHVzfSA9IHJlc3BvbnNlO1xuICAgICAgICBpZiAoc3RhdHVzID09PSAyMDEpIHJldHVybjtcblxuICAgICAgICBjb25zdCB7IGVycm9yIH0gPSBKU09OLnBhcnNlKHJlc3BvbnNlLmJvZHkpO1xuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcilcbiAgICB9KSgpXG59LmJpbmQoY29udGV4dCkiXX0=