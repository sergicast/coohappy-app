function cov_1lu7amaa1a(){var path="/Users/mac/bootcamp/collab/skylab-bootcamp-202004/staff/sergi-ramos/coohappy/coohappy-client-logic/retrieve-messages.spec.js";var hash="e3c45fa0b39bbf118f0a024fe2b84be8d8b61fa2";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/mac/bootcamp/collab/skylab-bootcamp-202004/staff/sergi-ramos/coohappy/coohappy-client-logic/retrieve-messages.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:63},end:{line:3,column:70}},"2":{start:{line:5,column:19},end:{line:5,column:34}},"3":{start:{line:6,column:19},end:{line:6,column:23}},"4":{start:{line:7,column:25},end:{line:7,column:55}},"5":{start:{line:8,column:15},end:{line:8,column:34}},"6":{start:{line:10,column:20},end:{line:10,column:43}},"7":{start:{line:11,column:0},end:{line:11,column:36}},"8":{start:{line:12,column:24},end:{line:12,column:52}},"9":{start:{line:13,column:14},end:{line:13,column:26}},"10":{start:{line:14,column:13},end:{line:14,column:28}},"11":{start:{line:17,column:40},end:{line:17,column:67}},"12":{start:{line:18,column:21},end:{line:18,column:45}},"13":{start:{line:19,column:73},end:{line:19,column:97}},"14":{start:{line:20,column:34},end:{line:20,column:61}},"15":{start:{line:24,column:0},end:{line:104,column:2}},"16":{start:{line:26,column:4},end:{line:26,column:47}},"17":{start:{line:26,column:17},end:{line:26,column:46}},"18":{start:{line:28,column:4},end:{line:60,column:6}},"19":{start:{line:30,column:8},end:{line:30,column:31}},"20":{start:{line:31,column:8},end:{line:31,column:36}},"21":{start:{line:32,column:8},end:{line:32,column:34}},"22":{start:{line:34,column:8},end:{line:34,column:33}},"23":{start:{line:35,column:8},end:{line:35,column:39}},"24":{start:{line:36,column:8},end:{line:36,column:40}},"25":{start:{line:37,column:8},end:{line:37,column:41}},"26":{start:{line:39,column:8},end:{line:39,column:42}},"27":{start:{line:40,column:8},end:{line:40,column:37}},"28":{start:{line:41,column:8},end:{line:41,column:25}},"29":{start:{line:42,column:8},end:{line:42,column:33}},"30":{start:{line:43,column:8},end:{line:43,column:43}},"31":{start:{line:44,column:8},end:{line:44,column:22}},"32":{start:{line:46,column:8},end:{line:46,column:45}},"33":{start:{line:47,column:8},end:{line:47,column:36}},"34":{start:{line:51,column:8},end:{line:51,column:46}},"35":{start:{line:52,column:21},end:{line:52,column:80}},"36":{start:{line:53,column:8},end:{line:53,column:24}},"37":{start:{line:54,column:8},end:{line:54,column:67}},"38":{start:{line:55,column:8},end:{line:55,column:63}},"39":{start:{line:56,column:22},end:{line:56,column:46}},"40":{start:{line:57,column:8},end:{line:57,column:123}},"41":{start:{line:62,column:4},end:{line:82,column:6}},"42":{start:{line:64,column:8},end:{line:70,column:10}},"43":{start:{line:65,column:30},end:{line:65,column:74}},"44":{start:{line:66,column:29},end:{line:66,column:82}},"45":{start:{line:68,column:12},end:{line:68,column:45}},"46":{start:{line:69,column:12},end:{line:69,column:34}},"47":{start:{line:72,column:8},end:{line:81,column:10}},"48":{start:{line:74,column:32},end:{line:74,column:56}},"49":{start:{line:75,column:33},end:{line:75,column:44}},"50":{start:{line:76,column:12},end:{line:76,column:37}},"51":{start:{line:77,column:12},end:{line:77,column:70}},"52":{start:{line:78,column:12},end:{line:78,column:63}},"53":{start:{line:84,column:4},end:{line:98,column:6}},"54":{start:{line:87,column:8},end:{line:97,column:10}},"55":{start:{line:89,column:11},end:{line:96,column:12}},"56":{start:{line:90,column:15},end:{line:90,column:53}},"57":{start:{line:93,column:15},end:{line:93,column:37}},"58":{start:{line:94,column:15},end:{line:94,column:64}},"59":{start:{line:101,column:4},end:{line:101,column:38}},"60":{start:{line:101,column:20},end:{line:101,column:37}},"61":{start:{line:103,column:4},end:{line:103,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:24,column:38},end:{line:24,column:39}},loc:{start:{line:24,column:44},end:{line:104,column:1}},line:24},"1":{name:"(anonymous_1)",decl:{start:{line:26,column:11},end:{line:26,column:12}},loc:{start:{line:26,column:17},end:{line:26,column:46}},line:26},"2":{name:"(anonymous_2)",decl:{start:{line:28,column:15},end:{line:28,column:16}},loc:{start:{line:28,column:27},end:{line:60,column:5}},line:28},"3":{name:"(anonymous_3)",decl:{start:{line:62,column:57},end:{line:62,column:58}},loc:{start:{line:62,column:63},end:{line:82,column:5}},line:62},"4":{name:"(anonymous_4)",decl:{start:{line:64,column:20},end:{line:64,column:21}},loc:{start:{line:64,column:32},end:{line:70,column:9}},line:64},"5":{name:"(anonymous_5)",decl:{start:{line:72,column:50},end:{line:72,column:51}},loc:{start:{line:72,column:62},end:{line:81,column:9}},line:72},"6":{name:"(anonymous_6)",decl:{start:{line:84,column:56},end:{line:84,column:57}},loc:{start:{line:84,column:62},end:{line:98,column:5}},line:84},"7":{name:"(anonymous_7)",decl:{start:{line:87,column:46},end:{line:87,column:47}},loc:{start:{line:87,column:58},end:{line:97,column:9}},line:87},"8":{name:"(anonymous_8)",decl:{start:{line:101,column:14},end:{line:101,column:15}},loc:{start:{line:101,column:20},end:{line:101,column:37}},line:101}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e3c45fa0b39bbf118f0a024fe2b84be8d8b61fa2"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1lu7amaa1a=function(){return actualCoverage;};}return actualCoverage;}cov_1lu7amaa1a();cov_1lu7amaa1a().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL:MONGODB_URL,JWT_SECRET}}=(cov_1lu7amaa1a().s[1]++,process);const{expect}=(cov_1lu7amaa1a().s[2]++,require('chai'));const{random}=(cov_1lu7amaa1a().s[3]++,Math);const retrieveMessages=(cov_1lu7amaa1a().s[4]++,require('./retrieve-messages'));const bcrypt=(cov_1lu7amaa1a().s[5]++,require('bcryptjs'));const jwtPromised=(cov_1lu7amaa1a().s[6]++,require('jsonwebtoken'));cov_1lu7amaa1a().s[7]++;global.fetch=require('node-fetch');const notAsyncStorage=(cov_1lu7amaa1a().s[8]++,require('not-async-storage'));const logic=(cov_1lu7amaa1a().s[9]++,require('.'));const atob=(cov_1lu7amaa1a().s[10]++,require('atob'));const{utils:{randomAccessCode}}=(cov_1lu7amaa1a().s[11]++,require('coohappy-commons'));const{mongoose}=(cov_1lu7amaa1a().s[12]++,require('coohappy-data'));const{mongoose:{ObjectId},models:{User,Cohousing,Message}}=(cov_1lu7amaa1a().s[13]++,require('coohappy-data'));const{errors:{VoidError}}=(cov_1lu7amaa1a().s[14]++,require('coohappy-commons'));let name,surname,email,password,hash,userId,nameCohousing,street,number,city,accessCode,date,laundryNum,token;cov_1lu7amaa1a().s[15]++;describe('logic - retrieve-messages',()=>{cov_1lu7amaa1a().f[0]++;cov_1lu7amaa1a().s[16]++;before(()=>{cov_1lu7amaa1a().f[1]++;cov_1lu7amaa1a().s[17]++;return mongoose.connect(MONGODB_URL);});cov_1lu7amaa1a().s[18]++;beforeEach(async()=>{cov_1lu7amaa1a().f[2]++;cov_1lu7amaa1a().s[19]++;await User.deleteMany();cov_1lu7amaa1a().s[20]++;await Cohousing.deleteMany();cov_1lu7amaa1a().s[21]++;await Message.deleteMany();cov_1lu7amaa1a().s[22]++;name=`name-${random()}`;cov_1lu7amaa1a().s[23]++;surname=`surname-${random()}`;cov_1lu7amaa1a().s[24]++;email=`e-${random()}@mail.com`;cov_1lu7amaa1a().s[25]++;password=`password-${random()}`;cov_1lu7amaa1a().s[26]++;nameCohousing=`name-${random()}`;cov_1lu7amaa1a().s[27]++;street=`street-${random()}`;cov_1lu7amaa1a().s[28]++;number=random();cov_1lu7amaa1a().s[29]++;city=`city-${random()}`;cov_1lu7amaa1a().s[30]++;accessCode=randomAccessCode(name);cov_1lu7amaa1a().s[31]++;laundryNum=4;cov_1lu7amaa1a().s[32]++;singleMessage=`message-${random()}`;cov_1lu7amaa1a().s[33]++;date=new Date().toString();cov_1lu7amaa1a().s[34]++;hash=await bcrypt.hash(password,10);const user=(cov_1lu7amaa1a().s[35]++,await User.create({name,surname,email,password:hash}));cov_1lu7amaa1a().s[36]++;userId=user.id;cov_1lu7amaa1a().s[37]++;token=await jwtPromised.sign({sub:userId},JWT_SECRET);cov_1lu7amaa1a().s[38]++;await logic.__context__.storage.setItem('TOKEN',token);let address=(cov_1lu7amaa1a().s[39]++,{street,number,city});cov_1lu7amaa1a().s[40]++;await Cohousing.create({name:nameCohousing,address,author:userId,accessCode,members:[userId],laundryNum});});cov_1lu7amaa1a().s[41]++;describe('when there are some messages to retrieve',()=>{cov_1lu7amaa1a().f[3]++;cov_1lu7amaa1a().s[42]++;beforeEach(async()=>{cov_1lu7amaa1a().f[4]++;const cohousing=(cov_1lu7amaa1a().s[43]++,await Cohousing.findOne({members:userId}));const _message=(cov_1lu7amaa1a().s[44]++,new Message({userId,message:singleMessage,date}));cov_1lu7amaa1a().s[45]++;cohousing.messages.push(_message);cov_1lu7amaa1a().s[46]++;await cohousing.save();});cov_1lu7amaa1a().s[47]++;it('should success on retrieve messages',async()=>{cov_1lu7amaa1a().f[5]++;const allMessages=(cov_1lu7amaa1a().s[48]++,await retrieveMessages());const{messages}=(cov_1lu7amaa1a().s[49]++,allMessages);cov_1lu7amaa1a().s[50]++;expect(messages).to.exist;cov_1lu7amaa1a().s[51]++;expect(messages[0].userId._id.toString()).to.equal(userId);cov_1lu7amaa1a().s[52]++;expect(messages[0].message).to.equal(singleMessage);});});cov_1lu7amaa1a().s[53]++;describe('when there are not messages to retrieve',()=>{cov_1lu7amaa1a().f[6]++;let allMessages;cov_1lu7amaa1a().s[54]++;it('should not retrieve any message',async()=>{cov_1lu7amaa1a().f[7]++;cov_1lu7amaa1a().s[55]++;try{cov_1lu7amaa1a().s[56]++;allMessages=await retrieveMessages();}catch(error){cov_1lu7amaa1a().s[57]++;expect(error).to.exist;cov_1lu7amaa1a().s[58]++;expect(error.message).to.equal('no messages yet');}});});cov_1lu7amaa1a().s[59]++;afterEach(()=>{cov_1lu7amaa1a().f[8]++;cov_1lu7amaa1a().s[60]++;return User.deleteMany();});cov_1lu7amaa1a().s[61]++;after(mongoose.disconnect);});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLW1lc3NhZ2VzLnNwZWMuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImVudiIsIlRFU1RfTU9OR09EQl9VUkwiLCJNT05HT0RCX1VSTCIsIkpXVF9TRUNSRVQiLCJwcm9jZXNzIiwiZXhwZWN0IiwicmFuZG9tIiwiTWF0aCIsInJldHJpZXZlTWVzc2FnZXMiLCJiY3J5cHQiLCJqd3RQcm9taXNlZCIsImdsb2JhbCIsImZldGNoIiwibm90QXN5bmNTdG9yYWdlIiwibG9naWMiLCJhdG9iIiwidXRpbHMiLCJyYW5kb21BY2Nlc3NDb2RlIiwibW9uZ29vc2UiLCJPYmplY3RJZCIsIm1vZGVscyIsIlVzZXIiLCJDb2hvdXNpbmciLCJNZXNzYWdlIiwiZXJyb3JzIiwiVm9pZEVycm9yIiwibmFtZSIsInN1cm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiaGFzaCIsInVzZXJJZCIsIm5hbWVDb2hvdXNpbmciLCJzdHJlZXQiLCJudW1iZXIiLCJjaXR5IiwiYWNjZXNzQ29kZSIsImRhdGUiLCJsYXVuZHJ5TnVtIiwidG9rZW4iLCJkZXNjcmliZSIsImJlZm9yZSIsImNvbm5lY3QiLCJiZWZvcmVFYWNoIiwiZGVsZXRlTWFueSIsInNpbmdsZU1lc3NhZ2UiLCJEYXRlIiwidG9TdHJpbmciLCJ1c2VyIiwiY3JlYXRlIiwiaWQiLCJzaWduIiwic3ViIiwiX19jb250ZXh0X18iLCJzdG9yYWdlIiwic2V0SXRlbSIsImFkZHJlc3MiLCJhdXRob3IiLCJtZW1iZXJzIiwiY29ob3VzaW5nIiwiZmluZE9uZSIsIl9tZXNzYWdlIiwibWVzc2FnZSIsIm1lc3NhZ2VzIiwicHVzaCIsInNhdmUiLCJpdCIsImFsbE1lc3NhZ2VzIiwidG8iLCJleGlzdCIsIl9pZCIsImVxdWFsIiwiZXJyb3IiLCJhZnRlckVhY2giLCJhZnRlciIsImRpc2Nvbm5lY3QiXSwibWFwcGluZ3MiOiJpNUxBZVk7bUhBZlpBLE9BQU8sQ0FBQyxRQUFELENBQVAsQ0FBa0JDLE1B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LENBQVIsQ0F0Q3dDLHlCQTREeENMLFFBQVEsQ0FBQyx5Q0FBRCxDQUE0QyxJQUFNLHlCQUN0RCxHQUFJMkIsQ0FBQUEsV0FBSixDQURzRCx5QkFHdERELEVBQUUsQ0FBQyxpQ0FBRCxDQUFvQyxTQUFZLGtEQUUvQyxHQUFHLDBCQUNDQyxXQUFXLENBQUcsS0FBTTNELENBQUFBLGdCQUFnQixFQUFwQyxDQUVILE9BQU1nRSxLQUFOLENBQVksMEJBQ1RuRSxNQUFNLENBQUNtRSxLQUFELENBQU4sQ0FBY0osRUFBZCxDQUFpQkMsS0FBakIsQ0FEUyx5QkFFVGhFLE1BQU0sQ0FBQ21FLEtBQUssQ0FBQ1YsT0FBUCxDQUFOLENBQXNCTSxFQUF0QixDQUF5QkcsS0FBekIsQ0FBK0IsaUJBQS9CLEVBRUgsQ0FDSCxDQVZDLENBQUYsQ0FXSCxDQWRPLENBQVIsQ0E1RHdDLHlCQTZFeENFLFNBQVMsQ0FBQyxJQUFNLHdEQUFBcEQsQ0FBQUEsSUFBSSxDQUFDdUIsVUFBTCxHQUFpQixDQUF4QixDQUFULENBN0V3Qyx5QkErRXhDOEIsS0FBSyxDQUFDeEQsUUFBUSxDQUFDeUQsVUFBVixDQUFMLENBQ0gsQ0FoRk8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpXG5cbmNvbnN0IHsgZW52OiB7IFRFU1RfTU9OR09EQl9VUkw6IE1PTkdPREJfVVJMLCBKV1RfU0VDUkVUIH0gfSA9IHByb2Nlc3NcblxuY29uc3QgeyBleHBlY3QgfSA9IHJlcXVpcmUoJ2NoYWknKVxuY29uc3QgeyByYW5kb20gfSA9IE1hdGhcbmNvbnN0IHJldHJpZXZlTWVzc2FnZXMgPSByZXF1aXJlKCcuL3JldHJpZXZlLW1lc3NhZ2VzJylcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJylcblxuY29uc3Qgand0UHJvbWlzZWQgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKVxuZ2xvYmFsLmZldGNoID0gcmVxdWlyZSgnbm9kZS1mZXRjaCcpXG5jb25zdCBub3RBc3luY1N0b3JhZ2UgPSByZXF1aXJlKCdub3QtYXN5bmMtc3RvcmFnZScpXG5jb25zdCBsb2dpYyA9IHJlcXVpcmUoJy4nKVxuY29uc3QgYXRvYiA9IHJlcXVpcmUoJ2F0b2InKVxuXG5cbmNvbnN0IHsgdXRpbHM6IHsgcmFuZG9tQWNjZXNzQ29kZSB9IH0gPSByZXF1aXJlKCdjb29oYXBweS1jb21tb25zJylcbmNvbnN0IHsgbW9uZ29vc2UgfSA9IHJlcXVpcmUoJ2Nvb2hhcHB5LWRhdGEnKVxuY29uc3QgeyBtb25nb29zZTogeyBPYmplY3RJZCB9LCBtb2RlbHM6IHsgVXNlciwgQ29ob3VzaW5nLCBNZXNzYWdlIH0gfSA9IHJlcXVpcmUoJ2Nvb2hhcHB5LWRhdGEnKVxuY29uc3QgeyBlcnJvcnM6IHsgVm9pZEVycm9yIH0gfSA9IHJlcXVpcmUoJ2Nvb2hhcHB5LWNvbW1vbnMnKVxuXG5sZXQgbmFtZSwgc3VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCBoYXNoLCB1c2VySWQsIG5hbWVDb2hvdXNpbmcsIHN0cmVldCwgbnVtYmVyLCBjaXR5LCBhY2Nlc3NDb2RlLCBkYXRlLCBsYXVuZHJ5TnVtLCB0b2tlblxuXG5kZXNjcmliZSgnbG9naWMgLSByZXRyaWV2ZS1tZXNzYWdlcycsICgpID0+IHtcblxuICAgIGJlZm9yZSgoKSA9PiBtb25nb29zZS5jb25uZWN0KE1PTkdPREJfVVJMKSlcblxuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuXG4gICAgICAgIGF3YWl0IFVzZXIuZGVsZXRlTWFueSgpXG4gICAgICAgIGF3YWl0IENvaG91c2luZy5kZWxldGVNYW55KClcbiAgICAgICAgYXdhaXQgTWVzc2FnZS5kZWxldGVNYW55KClcblxuICAgICAgICBuYW1lID0gYG5hbWUtJHtyYW5kb20oKX1gXG4gICAgICAgIHN1cm5hbWUgPSBgc3VybmFtZS0ke3JhbmRvbSgpfWBcbiAgICAgICAgZW1haWwgPSBgZS0ke3JhbmRvbSgpfUBtYWlsLmNvbWBcbiAgICAgICAgcGFzc3dvcmQgPSBgcGFzc3dvcmQtJHtyYW5kb20oKX1gXG5cbiAgICAgICAgbmFtZUNvaG91c2luZyA9IGBuYW1lLSR7cmFuZG9tKCl9YFxuICAgICAgICBzdHJlZXQgPSBgc3RyZWV0LSR7cmFuZG9tKCl9YFxuICAgICAgICBudW1iZXIgPSByYW5kb20oKVxuICAgICAgICBjaXR5ID0gYGNpdHktJHtyYW5kb20oKX1gXG4gICAgICAgIGFjY2Vzc0NvZGUgPSByYW5kb21BY2Nlc3NDb2RlKG5hbWUpXG4gICAgICAgIGxhdW5kcnlOdW0gPSA0XG5cbiAgICAgICAgc2luZ2xlTWVzc2FnZSA9IGBtZXNzYWdlLSR7cmFuZG9tKCl9YFxuICAgICAgICBkYXRlID0gKG5ldyBEYXRlKS50b1N0cmluZygpXG5cblxuXG4gICAgICAgIGhhc2ggPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgMTApXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmNyZWF0ZSh7IG5hbWUsIHN1cm5hbWUsIGVtYWlsLCBwYXNzd29yZDogaGFzaCB9KVxuICAgICAgICB1c2VySWQgPSB1c2VyLmlkXG4gICAgICAgIHRva2VuID0gYXdhaXQgand0UHJvbWlzZWQuc2lnbih7IHN1YjogdXNlcklkIH0sIEpXVF9TRUNSRVQpXG4gICAgICAgIGF3YWl0IGxvZ2ljLl9fY29udGV4dF9fLnN0b3JhZ2Uuc2V0SXRlbSgnVE9LRU4nLCB0b2tlbilcbiAgICAgICAgbGV0IGFkZHJlc3MgPSB7IHN0cmVldCwgbnVtYmVyLCBjaXR5IH1cbiAgICAgICAgYXdhaXQgQ29ob3VzaW5nLmNyZWF0ZSh7IG5hbWU6IG5hbWVDb2hvdXNpbmcsIGFkZHJlc3MsIGF1dGhvcjogdXNlcklkLCBhY2Nlc3NDb2RlLCBtZW1iZXJzOiBbdXNlcklkXSwgbGF1bmRyeU51bSB9KVxuXG4gICAgICAgIFxuICAgIH0pXG5cbiAgICBkZXNjcmliZSgnd2hlbiB0aGVyZSBhcmUgc29tZSBtZXNzYWdlcyB0byByZXRyaWV2ZScsICgpID0+IHtcblxuICAgICAgICBiZWZvcmVFYWNoKCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb2hvdXNpbmcgPSBhd2FpdCBDb2hvdXNpbmcuZmluZE9uZSh7IG1lbWJlcnM6IHVzZXJJZCB9KVxuICAgICAgICAgICAgY29uc3QgX21lc3NhZ2UgPSBuZXcgTWVzc2FnZSh7IHVzZXJJZCwgbWVzc2FnZTogc2luZ2xlTWVzc2FnZSwgZGF0ZSB9KVxuICAgIFxuICAgICAgICAgICAgY29ob3VzaW5nLm1lc3NhZ2VzLnB1c2goX21lc3NhZ2UpXG4gICAgICAgICAgICBhd2FpdCBjb2hvdXNpbmcuc2F2ZSgpXG4gICAgICAgIH0pXG5cbiAgICAgICAgaXQoJ3Nob3VsZCBzdWNjZXNzIG9uIHJldHJpZXZlIG1lc3NhZ2VzJywgYXN5bmMgKCkgPT4ge1xuXG4gICAgICAgICAgICBjb25zdCBhbGxNZXNzYWdlcyA9IGF3YWl0IHJldHJpZXZlTWVzc2FnZXMoKVxuICAgICAgICAgICAgY29uc3QgeyBtZXNzYWdlcyB9ID0gYWxsTWVzc2FnZXNcbiAgICAgICAgICAgIGV4cGVjdChtZXNzYWdlcykudG8uZXhpc3RcbiAgICAgICAgICAgIGV4cGVjdChtZXNzYWdlc1swXS51c2VySWQuX2lkLnRvU3RyaW5nKCkpLnRvLmVxdWFsKHVzZXJJZClcbiAgICAgICAgICAgIGV4cGVjdChtZXNzYWdlc1swXS5tZXNzYWdlKS50by5lcXVhbChzaW5nbGVNZXNzYWdlKVxuICAgICAgICAgXG5cbiAgICAgICAgfSlcbiAgICB9KVxuXG4gICAgZGVzY3JpYmUoJ3doZW4gdGhlcmUgYXJlIG5vdCBtZXNzYWdlcyB0byByZXRyaWV2ZScsICgpID0+IHtcbiAgICAgICAgbGV0IGFsbE1lc3NhZ2VzXG4gICAgICBcbiAgICAgICAgaXQoJ3Nob3VsZCBub3QgcmV0cmlldmUgYW55IG1lc3NhZ2UnLCBhc3luYyAoKSA9PiB7XG5cbiAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICAgYWxsTWVzc2FnZXMgPSBhd2FpdCByZXRyaWV2ZU1lc3NhZ2VzKClcblxuICAgICAgICAgICB9Y2F0Y2goZXJyb3Ipe1xuICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5leGlzdFxuICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvLmVxdWFsKCdubyBtZXNzYWdlcyB5ZXQnKVxuXG4gICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KVxuXG5cbiAgICBhZnRlckVhY2goKCkgPT4gVXNlci5kZWxldGVNYW55KCkpXG5cbiAgICBhZnRlcihtb25nb29zZS5kaXNjb25uZWN0KVxufSkiXX0=