function cov_1r6qy3zki3(){var path="/Users/mac/bootcamp/collab/skylab-bootcamp-202004/staff/sergi-ramos/coohappy/coohappy-client-logic/retrieve-cohousing.spec.js";var hash="c4803aacf242e1f2501f64ed074126cd28afb501";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/mac/bootcamp/collab/skylab-bootcamp-202004/staff/sergi-ramos/coohappy/coohappy-client-logic/retrieve-cohousing.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:63},end:{line:3,column:70}},"2":{start:{line:6,column:26},end:{line:6,column:57}},"3":{start:{line:7,column:19},end:{line:7,column:23}},"4":{start:{line:8,column:19},end:{line:8,column:34}},"5":{start:{line:9,column:50},end:{line:9,column:74}},"6":{start:{line:10,column:15},end:{line:10,column:34}},"7":{start:{line:12,column:20},end:{line:12,column:43}},"8":{start:{line:13,column:0},end:{line:13,column:36}},"9":{start:{line:14,column:24},end:{line:14,column:52}},"10":{start:{line:15,column:14},end:{line:15,column:26}},"11":{start:{line:16,column:13},end:{line:16,column:28}},"12":{start:{line:19,column:57},end:{line:19,column:84}},"13":{start:{line:20,column:40},end:{line:20,column:67}},"14":{start:{line:22,column:0},end:{line:103,column:2}},"15":{start:{line:23,column:4},end:{line:23,column:47}},"16":{start:{line:23,column:17},end:{line:23,column:46}},"17":{start:{line:27,column:4},end:{line:61,column:5}},"18":{start:{line:28,column:8},end:{line:60,column:77}},"19":{start:{line:34,column:16},end:{line:34,column:41}},"20":{start:{line:35,column:16},end:{line:35,column:47}},"21":{start:{line:36,column:16},end:{line:36,column:48}},"22":{start:{line:37,column:16},end:{line:37,column:49}},"23":{start:{line:39,column:16},end:{line:39,column:50}},"24":{start:{line:40,column:16},end:{line:40,column:45}},"25":{start:{line:41,column:16},end:{line:41,column:33}},"26":{start:{line:42,column:16},end:{line:42,column:41}},"27":{start:{line:43,column:16},end:{line:43,column:51}},"28":{start:{line:44,column:16},end:{line:44,column:30}},"29":{start:{line:46,column:16},end:{line:46,column:48}},"30":{start:{line:48,column:27},end:{line:48,column:39}},"31":{start:{line:49,column:24},end:{line:49,column:77}},"32":{start:{line:52,column:16},end:{line:52,column:32}},"33":{start:{line:53,column:30},end:{line:53,column:54}},"34":{start:{line:54,column:16},end:{line:54,column:131}},"35":{start:{line:57,column:16},end:{line:57,column:54}},"36":{start:{line:59,column:24},end:{line:59,column:69}},"37":{start:{line:60,column:27},end:{line:60,column:76}},"38":{start:{line:63,column:4},end:{line:78,column:6}},"39":{start:{line:65,column:8},end:{line:77,column:9}},"40":{start:{line:66,column:12},end:{line:76,column:17}},"41":{start:{line:69,column:20},end:{line:69,column:46}},"42":{start:{line:70,column:20},end:{line:70,column:83}},"43":{start:{line:71,column:20},end:{line:71,column:77}},"44":{start:{line:72,column:20},end:{line:72,column:80}},"45":{start:{line:73,column:20},end:{line:73,column:69}},"46":{start:{line:74,column:20},end:{line:74,column:76}},"47":{start:{line:80,column:4},end:{line:96,column:6}},"48":{start:{line:82,column:8},end:{line:95,column:10}},"49":{start:{line:84,column:12},end:{line:84,column:40}},"50":{start:{line:85,column:12},end:{line:94,column:13}},"51":{start:{line:86,column:16},end:{line:86,column:53}},"52":{start:{line:90,column:16},end:{line:90,column:49}},"53":{start:{line:91,column:16},end:{line:91,column:38}},"54":{start:{line:92,column:16},end:{line:92,column:100}},"55":{start:{line:100,column:4},end:{line:100,column:77}},"56":{start:{line:100,column:20},end:{line:100,column:76}},"57":{start:{line:102,column:4},end:{line:102,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:22,column:39},end:{line:22,column:40}},loc:{start:{line:22,column:45},end:{line:103,column:1}},line:22},"1":{name:"(anonymous_1)",decl:{start:{line:23,column:11},end:{line:23,column:12}},loc:{start:{line:23,column:17},end:{line:23,column:46}},line:23},"2":{name:"(anonymous_2)",decl:{start:{line:27,column:15},end:{line:27,column:16}},loc:{start:{line:28,column:8},end:{line:60,column:77}},line:28},"3":{name:"(anonymous_3)",decl:{start:{line:33,column:18},end:{line:33,column:19}},loc:{start:{line:33,column:24},end:{line:47,column:13}},line:33},"4":{name:"(anonymous_4)",decl:{start:{line:48,column:18},end:{line:48,column:19}},loc:{start:{line:48,column:27},end:{line:48,column:39}},line:48},"5":{name:"(anonymous_5)",decl:{start:{line:49,column:18},end:{line:49,column:19}},loc:{start:{line:49,column:24},end:{line:49,column:77}},line:49},"6":{name:"(anonymous_6)",decl:{start:{line:51,column:18},end:{line:51,column:19}},loc:{start:{line:51,column:26},end:{line:55,column:13}},line:51},"7":{name:"(anonymous_7)",decl:{start:{line:56,column:18},end:{line:56,column:19}},loc:{start:{line:56,column:31},end:{line:58,column:13}},line:56},"8":{name:"(anonymous_8)",decl:{start:{line:59,column:18},end:{line:59,column:19}},loc:{start:{line:59,column:24},end:{line:59,column:69}},line:59},"9":{name:"(anonymous_9)",decl:{start:{line:60,column:18},end:{line:60,column:19}},loc:{start:{line:60,column:27},end:{line:60,column:76}},line:60},"10":{name:"(anonymous_10)",decl:{start:{line:63,column:37},end:{line:63,column:38}},loc:{start:{line:63,column:43},end:{line:78,column:5}},line:63},"11":{name:"(anonymous_11)",decl:{start:{line:65,column:50},end:{line:65,column:51}},loc:{start:{line:66,column:12},end:{line:76,column:17}},line:66},"12":{name:"(anonymous_12)",decl:{start:{line:67,column:22},end:{line:67,column:23}},loc:{start:{line:67,column:37},end:{line:75,column:17}},line:67},"13":{name:"(anonymous_13)",decl:{start:{line:80,column:47},end:{line:80,column:48}},loc:{start:{line:80,column:53},end:{line:96,column:5}},line:80},"14":{name:"(anonymous_14)",decl:{start:{line:82,column:51},end:{line:82,column:52}},loc:{start:{line:82,column:63},end:{line:95,column:9}},line:82},"15":{name:"(anonymous_15)",decl:{start:{line:100,column:14},end:{line:100,column:15}},loc:{start:{line:100,column:20},end:{line:100,column:76}},line:100}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c4803aacf242e1f2501f64ed074126cd28afb501"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1r6qy3zki3=function(){return actualCoverage;};}return actualCoverage;}cov_1r6qy3zki3();cov_1r6qy3zki3().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL:MONGODB_URL,JWT_SECRET}}=(cov_1r6qy3zki3().s[1]++,process);const retrieveCohousing=(cov_1r6qy3zki3().s[2]++,require('./retrieve-cohousing'));const{random}=(cov_1r6qy3zki3().s[3]++,Math);const{expect}=(cov_1r6qy3zki3().s[4]++,require('chai'));const{mongoose,models:{User,Cohousing}}=(cov_1r6qy3zki3().s[5]++,require('coohappy-data'));const bcrypt=(cov_1r6qy3zki3().s[6]++,require('bcryptjs'));const jwtPromised=(cov_1r6qy3zki3().s[7]++,require('jsonwebtoken'));cov_1r6qy3zki3().s[8]++;global.fetch=require('node-fetch');const notAsyncStorage=(cov_1r6qy3zki3().s[9]++,require('not-async-storage'));const logic=(cov_1r6qy3zki3().s[10]++,require('.'));const atob=(cov_1r6qy3zki3().s[11]++,require('atob'));const{errors:{DuplicityError,UnexistenceError}}=(cov_1r6qy3zki3().s[12]++,require('coohappy-commons'));const{utils:{randomAccessCode}}=(cov_1r6qy3zki3().s[13]++,require('coohappy-commons'));cov_1r6qy3zki3().s[14]++;describe('logic - retrieve cohousing',()=>{cov_1r6qy3zki3().f[0]++;cov_1r6qy3zki3().s[15]++;before(()=>{cov_1r6qy3zki3().f[1]++;cov_1r6qy3zki3().s[16]++;return mongoose.connect(MONGODB_URL);});let name,surname,email,password,userId,hash,street,number,city,cohousingId,laundryNum,token;cov_1r6qy3zki3().s[17]++;beforeEach(()=>{cov_1r6qy3zki3().f[2]++;cov_1r6qy3zki3().s[18]++;return Promise.all([User.deleteMany(),Cohousing.deleteMany()]).then(()=>{cov_1r6qy3zki3().f[3]++;cov_1r6qy3zki3().s[19]++;name=`name-${random()}`;cov_1r6qy3zki3().s[20]++;surname=`surname-${random()}`;cov_1r6qy3zki3().s[21]++;email=`email-@${random()}.com`;cov_1r6qy3zki3().s[22]++;password=`password-${random()}`;cov_1r6qy3zki3().s[23]++;nameCohousing=`name-${random()}`;cov_1r6qy3zki3().s[24]++;street=`street-${random()}`;cov_1r6qy3zki3().s[25]++;number=random();cov_1r6qy3zki3().s[26]++;city=`city-${random()}`;cov_1r6qy3zki3().s[27]++;accessCode=randomAccessCode(name);cov_1r6qy3zki3().s[28]++;laundryNum=4;cov_1r6qy3zki3().s[29]++;return bcrypt.hash(password,10);}).then(_hash=>{cov_1r6qy3zki3().f[4]++;cov_1r6qy3zki3().s[30]++;return hash=_hash;}).then(()=>{cov_1r6qy3zki3().f[5]++;cov_1r6qy3zki3().s[31]++;return User.create({name,surname,email,password:hash});}).then(user=>{cov_1r6qy3zki3().f[6]++;cov_1r6qy3zki3().s[32]++;userId=user.id;let address=(cov_1r6qy3zki3().s[33]++,{street,number,city});cov_1r6qy3zki3().s[34]++;return Cohousing.create({name:nameCohousing,address,author:userId,accessCode,members:[userId],laundryNum});}).then(cohousing=>{cov_1r6qy3zki3().f[7]++;cov_1r6qy3zki3().s[35]++;cohousingId=cohousing._id.toString();}).then(()=>{cov_1r6qy3zki3().f[8]++;cov_1r6qy3zki3().s[36]++;return jwtPromised.sign({sub:userId},JWT_SECRET);}).then(token=>{cov_1r6qy3zki3().f[9]++;cov_1r6qy3zki3().s[37]++;return logic.__context__.storage.setItem('TOKEN',token);});});cov_1r6qy3zki3().s[38]++;describe('when cohousing exist',()=>{cov_1r6qy3zki3().f[10]++;cov_1r6qy3zki3().s[39]++;it('should succeed on valid cohousingId',()=>{cov_1r6qy3zki3().f[11]++;cov_1r6qy3zki3().s[40]++;return retrieveCohousing().then(cohousing=>{cov_1r6qy3zki3().f[12]++;cov_1r6qy3zki3().s[41]++;expect(cohousing).to.exist;cov_1r6qy3zki3().s[42]++;expect(cohousing.author.toString()).to.equal(userId.toString());cov_1r6qy3zki3().s[43]++;expect(cohousing.name.toString()).to.equal(nameCohousing);cov_1r6qy3zki3().s[44]++;expect(cohousing.address.street.toString()).to.equal(street);cov_1r6qy3zki3().s[45]++;expect(cohousing.address.number).to.equal(number);cov_1r6qy3zki3().s[46]++;expect(cohousing.address.city.toString()).to.equal(city);});});});cov_1r6qy3zki3().s[47]++;describe('when coohousing does not exist',()=>{cov_1r6qy3zki3().f[13]++;cov_1r6qy3zki3().s[48]++;it('should fail on innexitence cohousing',async()=>{cov_1r6qy3zki3().f[14]++;let cohousing;cov_1r6qy3zki3().s[49]++;await Cohousing.deleteMany();cov_1r6qy3zki3().s[50]++;try{cov_1r6qy3zki3().s[51]++;cohousing=await retrieveCohousing();}catch(error){cov_1r6qy3zki3().s[52]++;expect(cohousing).to.be.undefined;cov_1r6qy3zki3().s[53]++;expect(error).to.exist;cov_1r6qy3zki3().s[54]++;expect(error.message).to.equal(`cohousing of user with id ${userId} does not exist`);}});});cov_1r6qy3zki3().s[55]++;afterEach(()=>{cov_1r6qy3zki3().f[15]++;cov_1r6qy3zki3().s[56]++;return Promise.all([User.deleteMany(),Cohousing.deleteMany()]);});cov_1r6qy3zki3().s[57]++;after(mongoose.disconnect);});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLWNvaG91c2luZy5zcGVjLmpzIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJjb25maWciLCJlbnYiLCJURVNUX01PTkdPREJfVVJMIiwiTU9OR09EQl9VUkwiLCJKV1RfU0VDUkVUIiwicHJvY2VzcyIsInJldHJpZXZlQ29ob3VzaW5nIiwicmFuZG9tIiwiTWF0aCIsImV4cGVjdCIsIm1vbmdvb3NlIiwibW9kZWxzIiwiVXNlciIsIkNvaG91c2luZyIsImJjcnlwdCIsImp3dFByb21pc2VkIiwiZ2xvYmFsIiwiZmV0Y2giLCJub3RBc3luY1N0b3JhZ2UiLCJsb2dpYyIsImF0b2IiLCJlcnJvcnMiLCJEdXBsaWNpdHlFcnJvciIsIlVuZXhpc3RlbmNlRXJyb3IiLCJ1dGlscyIsInJhbmRvbUFjY2Vzc0NvZGUiLCJkZXNjcmliZSIsImJlZm9yZSIsImNvbm5lY3QiLCJuYW1lIiwic3VybmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJ1c2VySWQiLCJoYXNoIiwic3RyZWV0IiwibnVtYmVyIiwiY2l0eSIsImNvaG91c2luZ0lkIiwibGF1bmRyeU51bSIsInRva2VuIiwiYmVmb3JlRWFjaCIsIlByb21pc2UiLCJhbGwiLCJkZWxldGVNYW55IiwidGhlbiIsIm5hbWVDb2hvdXNpbmciLCJhY2Nlc3NDb2RlIiwiX2hhc2giLCJjcmVhdGUiLCJ1c2VyIiwiaWQiLCJhZGRyZXNzIiwiYXV0aG9yIiwibWVtYmVycyIsImNvaG91c2luZyIsIl9pZCIsInRvU3RyaW5nIiwic2lnbiIsInN1YiIsIl9fY29udGV4dF9fIiwic3RvcmFnZSIsInNldEl0ZW0iLCJpdCIsInRvIiwiZXhpc3QiLCJlcXVhbCIsImVycm9yIiwiYmUiLCJ1bmRlZmluZWQiLCJtZXNzYWdlIiwiYWZ0ZXJFYWNoIiwiYWZ0ZXIiLCJkaXNjb25uZWN0Il0sIm1hcHBpbmdzIjoiaXZOQWVZO21IQWZaQSxPQUFPLENBQUMsUUFBRCxDQUFQLENBQWtCQyxNQUFsQixHQUVBLEtBQU0sQ0FBRUMsR0FB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K0IsVUFBVixFQUFOLENBRm1ELHlCQUduRCxHQUFJLDBCQUNBVyxTQUFTLENBQUcsS0FBTWpELENBQUFBLGlCQUFpQixFQUFuQyxDQUVILENBQUMsTUFBTzZELEtBQVAsQ0FBYywwQkFFWjFELE1BQU0sQ0FBQzhDLFNBQUQsQ0FBTixDQUFrQlMsRUFBbEIsQ0FBcUJJLEVBQXJCLENBQXdCQyxTQUF4QixDQUZZLHlCQUdaNUQsTUFBTSxDQUFDMEQsS0FBRCxDQUFOLENBQWNILEVBQWQsQ0FBaUJDLEtBQWpCLENBSFkseUJBSVp4RCxNQUFNLENBQUMwRCxLQUFLLENBQUNHLE9BQVAsQ0FBTixDQUFzQk4sRUFBdEIsQ0FBeUJFLEtBQXpCLENBQWdDLDZCQUE0QmpDLE1BQU8saUJBQW5FLEVBRUgsQ0FDSixDQWJDLENBQUYsQ0FjSCxDQWhCTyxDQUFSLENBMUR5Qyx5QkE4RXpDc0MsU0FBUyxDQUFDLElBQU0seURBQUE3QixDQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxDQUFDL0IsSUFBSSxDQUFDZ0MsVUFBTCxFQUFELENBQW9CL0IsU0FBUyxDQUFDK0IsVUFBVixFQUFwQixDQUFaLEVBQXdELENBQS9ELENBQVQsQ0E5RXlDLHlCQWdGekM0QixLQUFLLENBQUM5RCxRQUFRLENBQUMrRCxVQUFWLENBQUwsQ0FDSCxDQWpGTyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZSgnZG90ZW52JykuY29uZmlnKClcblxuY29uc3QgeyBlbnY6IHsgVEVTVF9NT05HT0RCX1VSTDogTU9OR09EQl9VUkwsIEpXVF9TRUNSRVQgfSB9ID0gcHJvY2Vzc1xuXG5cbmNvbnN0IHJldHJpZXZlQ29ob3VzaW5nID0gcmVxdWlyZSgnLi9yZXRyaWV2ZS1jb2hvdXNpbmcnKVxuY29uc3QgeyByYW5kb20gfSA9IE1hdGhcbmNvbnN0IHsgZXhwZWN0IH0gPSByZXF1aXJlKCdjaGFpJylcbmNvbnN0IHsgbW9uZ29vc2UsIG1vZGVsczogeyBVc2VyLCBDb2hvdXNpbmcgfSB9ID0gcmVxdWlyZSgnY29vaGFwcHktZGF0YScpXG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHRqcycpXG5cbmNvbnN0IGp3dFByb21pc2VkID0gcmVxdWlyZSgnanNvbndlYnRva2VuJylcbmdsb2JhbC5mZXRjaCA9IHJlcXVpcmUoJ25vZGUtZmV0Y2gnKVxuY29uc3Qgbm90QXN5bmNTdG9yYWdlID0gcmVxdWlyZSgnbm90LWFzeW5jLXN0b3JhZ2UnKVxuY29uc3QgbG9naWMgPSByZXF1aXJlKCcuJylcbmNvbnN0IGF0b2IgPSByZXF1aXJlKCdhdG9iJylcblxuXG5jb25zdCB7IGVycm9yczogeyBEdXBsaWNpdHlFcnJvciwgVW5leGlzdGVuY2VFcnJvciB9IH0gPSByZXF1aXJlKCdjb29oYXBweS1jb21tb25zJylcbmNvbnN0IHsgdXRpbHM6IHsgcmFuZG9tQWNjZXNzQ29kZSB9IH0gPSByZXF1aXJlKCdjb29oYXBweS1jb21tb25zJylcblxuZGVzY3JpYmUoJ2xvZ2ljIC0gcmV0cmlldmUgY29ob3VzaW5nJywgKCkgPT4ge1xuICAgIGJlZm9yZSgoKSA9PiBtb25nb29zZS5jb25uZWN0KE1PTkdPREJfVVJMKSlcblxuICAgIGxldCBuYW1lLCBzdXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIHVzZXJJZCwgaGFzaCwgc3RyZWV0LCBudW1iZXIsIGNpdHksIGNvaG91c2luZ0lkLCBsYXVuZHJ5TnVtLCB0b2tlblxuXG4gICAgYmVmb3JlRWFjaCgoKSA9PlxuICAgICAgICBQcm9taXNlLmFsbChcbiAgICAgICAgICAgIFtVc2VyLmRlbGV0ZU1hbnkoKSxcbiAgICAgICAgICAgIENvaG91c2luZy5kZWxldGVNYW55KClcbiAgICAgICAgICAgIF0pXG5cbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBuYW1lID0gYG5hbWUtJHtyYW5kb20oKX1gXG4gICAgICAgICAgICAgICAgc3VybmFtZSA9IGBzdXJuYW1lLSR7cmFuZG9tKCl9YFxuICAgICAgICAgICAgICAgIGVtYWlsID0gYGVtYWlsLUAke3JhbmRvbSgpfS5jb21gXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQgPSBgcGFzc3dvcmQtJHtyYW5kb20oKX1gXG5cbiAgICAgICAgICAgICAgICBuYW1lQ29ob3VzaW5nID0gYG5hbWUtJHtyYW5kb20oKX1gXG4gICAgICAgICAgICAgICAgc3RyZWV0ID0gYHN0cmVldC0ke3JhbmRvbSgpfWBcbiAgICAgICAgICAgICAgICBudW1iZXIgPSByYW5kb20oKVxuICAgICAgICAgICAgICAgIGNpdHkgPSBgY2l0eS0ke3JhbmRvbSgpfWBcbiAgICAgICAgICAgICAgICBhY2Nlc3NDb2RlID0gcmFuZG9tQWNjZXNzQ29kZShuYW1lKVxuICAgICAgICAgICAgICAgIGxhdW5kcnlOdW0gPSA0XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKF9oYXNoID0+IGhhc2ggPSBfaGFzaClcbiAgICAgICAgICAgIC50aGVuKCgpID0+IFVzZXIuY3JlYXRlKHsgbmFtZSwgc3VybmFtZSwgZW1haWwsIHBhc3N3b3JkOiBoYXNoIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAudGhlbih1c2VyID0+IHtcbiAgICAgICAgICAgICAgICB1c2VySWQgPSB1c2VyLmlkXG4gICAgICAgICAgICAgICAgbGV0IGFkZHJlc3MgPSB7IHN0cmVldCwgbnVtYmVyLCBjaXR5IH1cbiAgICAgICAgICAgICAgICByZXR1cm4gQ29ob3VzaW5nLmNyZWF0ZSh7IG5hbWU6IG5hbWVDb2hvdXNpbmcsIGFkZHJlc3MsIGF1dGhvcjogdXNlcklkLCBhY2Nlc3NDb2RlLCBtZW1iZXJzOiBbdXNlcklkXSwgbGF1bmRyeU51bX0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oY29ob3VzaW5nID0+IHtcbiAgICAgICAgICAgICAgICBjb2hvdXNpbmdJZCA9IGNvaG91c2luZy5faWQudG9TdHJpbmcoKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IGp3dFByb21pc2VkLnNpZ24oeyBzdWI6IHVzZXJJZCB9LCBKV1RfU0VDUkVUKSlcbiAgICAgICAgICAgIC50aGVuKHRva2VuID0+IGxvZ2ljLl9fY29udGV4dF9fLnN0b3JhZ2Uuc2V0SXRlbSgnVE9LRU4nLCB0b2tlbikpXG4gICAgKVxuXG4gICAgZGVzY3JpYmUoJ3doZW4gY29ob3VzaW5nIGV4aXN0JywgKCkgPT4ge1xuXG4gICAgICAgIGl0KCdzaG91bGQgc3VjY2VlZCBvbiB2YWxpZCBjb2hvdXNpbmdJZCcsICgpID0+XG4gICAgICAgICAgICByZXRyaWV2ZUNvaG91c2luZygpXG4gICAgICAgICAgICAgICAgLnRoZW4oKGNvaG91c2luZykgPT4ge1xuXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChjb2hvdXNpbmcpLnRvLmV4aXN0XG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChjb2hvdXNpbmcuYXV0aG9yLnRvU3RyaW5nKCkpLnRvLmVxdWFsKHVzZXJJZC50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgICAgICBleHBlY3QoY29ob3VzaW5nLm5hbWUudG9TdHJpbmcoKSkudG8uZXF1YWwobmFtZUNvaG91c2luZylcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGNvaG91c2luZy5hZGRyZXNzLnN0cmVldC50b1N0cmluZygpKS50by5lcXVhbChzdHJlZXQpXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChjb2hvdXNpbmcuYWRkcmVzcy5udW1iZXIpLnRvLmVxdWFsKG51bWJlcilcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGNvaG91c2luZy5hZGRyZXNzLmNpdHkudG9TdHJpbmcoKSkudG8uZXF1YWwoY2l0eSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICApXG4gICAgfSlcblxuICAgIGRlc2NyaWJlKCd3aGVuIGNvb2hvdXNpbmcgZG9lcyBub3QgZXhpc3QnLCAoKSA9PiB7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBmYWlsIG9uIGlubmV4aXRlbmNlIGNvaG91c2luZycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGxldCBjb2hvdXNpbmdcbiAgICAgICAgICAgIGF3YWl0IENvaG91c2luZy5kZWxldGVNYW55KClcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29ob3VzaW5nID0gYXdhaXQgcmV0cmlldmVDb2hvdXNpbmcoKVxuXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuXG4gICAgICAgICAgICAgICAgZXhwZWN0KGNvaG91c2luZykudG8uYmUudW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5leGlzdFxuICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50by5lcXVhbChgY29ob3VzaW5nIG9mIHVzZXIgd2l0aCBpZCAke3VzZXJJZH0gZG9lcyBub3QgZXhpc3RgKVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSlcbiAgICBcblxuXG4gICAgYWZ0ZXJFYWNoKCgpID0+IFByb21pc2UuYWxsKFtVc2VyLmRlbGV0ZU1hbnkoKSwgQ29ob3VzaW5nLmRlbGV0ZU1hbnkoKV0pKVxuXG4gICAgYWZ0ZXIobW9uZ29vc2UuZGlzY29ubmVjdClcbn0pIl19