function cov_1d7lt04v3t(){var path="/Users/mac/bootcamp/collab/skylab-bootcamp-202004/staff/sergi-ramos/coohappy/coohappy-client-logic/send-food-list.js";var hash="2158d46ab086e3d157a9be2c530c8a495518ed6a";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/mac/bootcamp/collab/skylab-bootcamp-202004/staff/sergi-ramos/coohappy/coohappy-client-logic/send-food-list.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:44}},"1":{start:{line:2,column:35},end:{line:2,column:62}},"2":{start:{line:3,column:16},end:{line:3,column:36}},"3":{start:{line:5,column:0},end:{line:30,column:15}},"4":{start:{line:7,column:25},end:{line:7,column:32}},"5":{start:{line:8,column:15},end:{line:8,column:35}},"6":{start:{line:9,column:4},end:{line:11,column:5}},"7":{start:{line:10,column:8},end:{line:10,column:58}},"8":{start:{line:13,column:4},end:{line:13,column:34}},"9":{start:{line:14,column:4},end:{line:14,column:25}},"10":{start:{line:16,column:4},end:{line:29,column:8}},"11":{start:{line:18,column:22},end:{line:18,column:57}},"12":{start:{line:19,column:20},end:{line:22,column:87}},"13":{start:{line:24,column:8},end:{line:24,column:38}},"14":{start:{line:24,column:32},end:{line:24,column:38}},"15":{start:{line:26,column:26},end:{line:26,column:46}},"16":{start:{line:28,column:8},end:{line:28,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:17},end:{line:5,column:18}},loc:{start:{line:5,column:43},end:{line:30,column:1}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:9,column:21},end:{line:9,column:22}},loc:{start:{line:10,column:8},end:{line:10,column:58}},line:10},"2":{name:"(anonymous_2)",decl:{start:{line:16,column:12},end:{line:16,column:13}},loc:{start:{line:16,column:24},end:{line:29,column:5}},line:16}},branchMap:{"0":{loc:{start:{line:24,column:8},end:{line:24,column:38}},type:"if",locations:[{start:{line:24,column:8},end:{line:24,column:38}},{start:{line:24,column:8},end:{line:24,column:38}}],line:24}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2158d46ab086e3d157a9be2c530c8a495518ed6a"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1d7lt04v3t=function(){return actualCoverage;};}return actualCoverage;}cov_1d7lt04v3t();cov_1d7lt04v3t().s[0]++;require('coohappy-commons/polyfills/string');const{utils:{Email,call}}=(cov_1d7lt04v3t().s[1]++,require('coohappy-commons'));const context=(cov_1d7lt04v3t().s[2]++,require('./context'));cov_1d7lt04v3t().s[3]++;module.exports=function(message,email){cov_1d7lt04v3t().f[0]++;const{foodList}=(cov_1d7lt04v3t().s[4]++,message);let html=(cov_1d7lt04v3t().s[5]++,'<h1>Food list</h1>');cov_1d7lt04v3t().s[6]++;foodList.forEach(item=>{cov_1d7lt04v3t().f[1]++;cov_1d7lt04v3t().s[7]++;return html+=`<br><p>${item.weight}Kg ${item.name}</p>`;});cov_1d7lt04v3t().s[8]++;String.validate.notVoid(email);cov_1d7lt04v3t().s[9]++;Email.validate(email);cov_1d7lt04v3t().s[10]++;return(async()=>{cov_1d7lt04v3t().f[2]++;const token=(cov_1d7lt04v3t().s[11]++,await this.storage.getItem('TOKEN'));const res=(cov_1d7lt04v3t().s[12]++,await call('POST',`${this.API_URL}/cohousings/food/send`,JSON.stringify({html,email}),{'Content-Type':'application/json','Authorization':`Bearer ${token}`}));cov_1d7lt04v3t().s[13]++;if(res.status===201){cov_1d7lt04v3t().b[0][0]++;cov_1d7lt04v3t().s[14]++;return;}else{cov_1d7lt04v3t().b[0][1]++;}const{error}=(cov_1d7lt04v3t().s[15]++,JSON.parse(res.body));cov_1d7lt04v3t().s[16]++;throw new Error(error);})();}.bind(context);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlbmQtZm9vZC1saXN0LmpzIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJ1dGlscyIsIkVtYWlsIiwiY2FsbCIsImNvbnRleHQiLCJtb2R1bGUiLCJleHBvcnRzIiwibWVzc2FnZSIsImVtYWlsIiwiZm9vZExpc3QiLCJodG1sIiwiZm9yRWFjaCIsIml0ZW0iLCJ3ZWlnaHQiLCJuYW1lIiwiU3RyaW5nIiwidmFsaWRhdGUiLCJub3RWb2lkIiwidG9rZW4iLCJzdG9yYWdlIiwiZ2V0SXRlbSIsInJlcyIsIkFQSV9VUkwiLCJKU09OIiwic3RyaW5naWZ5Iiwic3RhdHVzIiwiZXJyb3IiLCJwYXJzZSIsImJvZHkiLCJFcnJvciIsImJpbmQiXSwibWFwcGluZ3MiOiJ1M0VBZVk7bUhBZlpBLE9BQU8sQ0FBQyxtQ0FBRCxDQUFQLENBQ0EsS0FBTSxDQUFFQyxLQUFLLENBQUUsQ0FBRUMsS0FBRixDQUFTQyxJQUFULENBQVQsMkJBQTZCSCxPQUFPLENBQUMsa0JBQUQsQ0FBcEMsQ0FBTixDQUNBLEtBQU1JLENBQUFBLE9BQU8sMEJBQUdKLE9BQU8sQ0FBQyxXQUFELENBQVYsQ0FBYixDLHdCQUVBSyxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsU0FBVUMsT0FBVixDQUFtQkMsS0FBbkIsQ0FBMEIseUJBRXZDLEtBQU0sQ0FBRUMsUUFBRiwyQkFBZUYsT0FBZixDQUFOLENBQ0EsR0FBSUcsQ0FBQUEsSUFBSSwwQkFBRyxvQkFBSCxDQUFSLENBSHVDLHdCQUl2Q0QsUUFBUSxDQUFDRSxPQUFULENBQWlCQyxJQUFJLEVBQ2pCLHVEQUFBRixDQUFBQSxJQUFJLEVBQUssVUFBU0UsSUFBSSxDQUFDQyxNQUFPLE1BQUtELElBQUksQ0FBQ0UsSUFBSyxNQUE3QyxDQUFrRCxDQUR0RCxFQUp1Qyx3QkFRdkNDLE1BQU0sQ0FBQ0MsUUFBUCxDQUFnQkMsT0FBaEIsQ0FBd0JULEtBQXhCLEVBUnVDLHdCQVN2Q04sS0FBSyxDQUFDYyxRQUFOLENBQWVSLEtBQWYsRUFUdUMseUJBV3ZDLE1BQU8sQ0FBQyxTQUFZLHlCQUVoQixLQUFNVSxDQUFBQSxLQUFLLDJCQUFHLEtBQU0sTUFBS0MsT0FBTCxDQUFhQyxPQUFiLENBQXFCLE9BQXJCLENBQVQsQ0FBWCxDQUNBLEtBQU1DLENBQUFBLEdBQUcsMkJBQUcsS0FBTWxCLENBQUFBLElBQUksQ0FBQyxNQUFELENBQ2pCLEdBQUUsS0FBS21CLE9BQVEsdUJBREUsQ0FFbEJDLElBQUksQ0FBQ0MsU0FBTCxDQUFlLENBQUVkLElBQUYsQ0FBUUYsS0FBUixDQUFmLENBRmtCLENBR2xCLENBQUUsZUFBZ0Isa0JBQWxCLENBQXNDLGdCQUFrQixVQUFTVSxLQUFNLEVBQXZFLENBSGtCLENBQWIsQ0FBVCxDQUhnQix5QkFRaEIsR0FBSUcsR0FBRyxDQUFDSSxNQUFKLEdBQWUsR0FBbkIsQ0FBd0IsNERBQU0sQ0FBOUIsaUNBRUEsS0FBTSxDQUFFQyxLQUFGLDRCQUFZSCxJQUFJLENBQUNJLEtBQUwsQ0FBV04sR0FBRyxDQUFDTyxJQUFmLENBQVosQ0FBTixDQVZnQix5QkFZaEIsS0FBTSxJQUFJQyxDQUFBQSxLQUFKLENBQVVILEtBQVYsQ0FBTixDQUNILENBYk0sR0FBUCxDQWNILENBekJnQixDQXlCZkksSUF6QmUsQ0F5QlYxQixPQXpCVSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJ2Nvb2hhcHB5LWNvbW1vbnMvcG9seWZpbGxzL3N0cmluZycpXG5jb25zdCB7IHV0aWxzOiB7IEVtYWlsLCBjYWxsIH0gfSA9IHJlcXVpcmUoJ2Nvb2hhcHB5LWNvbW1vbnMnKVxuY29uc3QgY29udGV4dCA9IHJlcXVpcmUoJy4vY29udGV4dCcpXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG1lc3NhZ2UsIGVtYWlsKSB7XG5cbiAgICBjb25zdCB7IGZvb2RMaXN0IH0gPSBtZXNzYWdlXG4gICAgbGV0IGh0bWwgPSAnPGgxPkZvb2QgbGlzdDwvaDE+J1xuICAgIGZvb2RMaXN0LmZvckVhY2goaXRlbSA9PlxuICAgICAgICBodG1sICs9IGA8YnI+PHA+JHtpdGVtLndlaWdodH1LZyAke2l0ZW0ubmFtZX08L3A+YFxuICAgIClcblxuICAgIFN0cmluZy52YWxpZGF0ZS5ub3RWb2lkKGVtYWlsKVxuICAgIEVtYWlsLnZhbGlkYXRlKGVtYWlsKVxuXG4gICAgcmV0dXJuIChhc3luYyAoKSA9PiB7XG5cbiAgICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCB0aGlzLnN0b3JhZ2UuZ2V0SXRlbSgnVE9LRU4nKVxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBjYWxsKCdQT1NUJyxcbiAgICAgICAgICAgIGAke3RoaXMuQVBJX1VSTH0vY29ob3VzaW5ncy9mb29kL3NlbmRgLFxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoeyBodG1sLCBlbWFpbCB9KSxcbiAgICAgICAgICAgIHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dG9rZW59YCB9KVxuXG4gICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDEpIHJldHVyblxuXG4gICAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IEpTT04ucGFyc2UocmVzLmJvZHkpXG5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKVxuICAgIH0pKClcbn0uYmluZChjb250ZXh0KSJdfQ==