function cov_4aq962pko(){var path="/Users/mac/bootcamp/collab/skylab-bootcamp-202004/staff/sergi-ramos/coohappy/coohappy-server-logic/authenticate-user.spec.js";var hash="1fabe783fda41c10850447544d8b47c83b71b4f9";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/mac/bootcamp/collab/skylab-bootcamp-202004/staff/sergi-ramos/coohappy/coohappy-server-logic/authenticate-user.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:51},end:{line:3,column:58}},"2":{start:{line:5,column:25},end:{line:5,column:55}},"3":{start:{line:6,column:19},end:{line:6,column:23}},"4":{start:{line:7,column:19},end:{line:7,column:34}},"5":{start:{line:8,column:39},end:{line:8,column:63}},"6":{start:{line:9,column:15},end:{line:9,column:34}},"7":{start:{line:11,column:0},end:{line:64,column:2}},"8":{start:{line:12,column:4},end:{line:12,column:47}},"9":{start:{line:12,column:17},end:{line:12,column:46}},"10":{start:{line:16,column:4},end:{line:27,column:5}},"11":{start:{line:17,column:8},end:{line:26,column:40}},"12":{start:{line:19,column:16},end:{line:19,column:41}},"13":{start:{line:20,column:16},end:{line:20,column:47}},"14":{start:{line:21,column:16},end:{line:21,column:48}},"15":{start:{line:22,column:16},end:{line:22,column:49}},"16":{start:{line:24,column:16},end:{line:24,column:48}},"17":{start:{line:26,column:27},end:{line:26,column:39}},"18":{start:{line:29,column:4},end:{line:50,column:6}},"19":{start:{line:30,column:8},end:{line:33,column:9}},"20":{start:{line:31,column:12},end:{line:32,column:47}},"21":{start:{line:32,column:30},end:{line:32,column:46}},"22":{start:{line:35,column:8},end:{line:38,column:9}},"23":{start:{line:36,column:12},end:{line:37,column:66}},"24":{start:{line:37,column:33},end:{line:37,column:65}},"25":{start:{line:40,column:8},end:{line:49,column:10}},"26":{start:{line:41,column:12},end:{line:41,column:32}},"27":{start:{line:43,column:12},end:{line:48,column:18}},"28":{start:{line:44,column:30},end:{line:44,column:76}},"29":{start:{line:46,column:20},end:{line:46,column:60}},"30":{start:{line:47,column:20},end:{line:47,column:68}},"31":{start:{line:52,column:4},end:{line:59,column:5}},"32":{start:{line:53,column:8},end:{line:58,column:14}},"33":{start:{line:54,column:26},end:{line:54,column:72}},"34":{start:{line:56,column:16},end:{line:56,column:56}},"35":{start:{line:57,column:16},end:{line:57,column:90}},"36":{start:{line:61,column:4},end:{line:61,column:38}},"37":{start:{line:61,column:20},end:{line:61,column:37}},"38":{start:{line:63,column:4},end:{line:63,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:11,column:38},end:{line:11,column:39}},loc:{start:{line:11,column:44},end:{line:64,column:1}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:11},end:{line:12,column:12}},loc:{start:{line:12,column:17},end:{line:12,column:46}},line:12},"2":{name:"(anonymous_2)",decl:{start:{line:16,column:15},end:{line:16,column:16}},loc:{start:{line:17,column:8},end:{line:26,column:40}},line:17},"3":{name:"(anonymous_3)",decl:{start:{line:18,column:18},end:{line:18,column:19}},loc:{start:{line:18,column:24},end:{line:25,column:13}},line:18},"4":{name:"(anonymous_4)",decl:{start:{line:26,column:18},end:{line:26,column:19}},loc:{start:{line:26,column:27},end:{line:26,column:39}},line:26},"5":{name:"(anonymous_5)",decl:{start:{line:29,column:41},end:{line:29,column:42}},loc:{start:{line:29,column:47},end:{line:50,column:5}},line:29},"6":{name:"(anonymous_6)",decl:{start:{line:30,column:19},end:{line:30,column:20}},loc:{start:{line:31,column:12},end:{line:32,column:47}},line:31},"7":{name:"(anonymous_7)",decl:{start:{line:32,column:22},end:{line:32,column:23}},loc:{start:{line:32,column:30},end:{line:32,column:46}},line:32},"8":{name:"(anonymous_8)",decl:{start:{line:35,column:52},end:{line:35,column:53}},loc:{start:{line:36,column:12},end:{line:37,column:66}},line:36},"9":{name:"(anonymous_9)",decl:{start:{line:37,column:22},end:{line:37,column:23}},loc:{start:{line:37,column:33},end:{line:37,column:65}},line:37},"10":{name:"(anonymous_10)",decl:{start:{line:40,column:44},end:{line:40,column:45}},loc:{start:{line:40,column:50},end:{line:49,column:9}},line:40},"11":{name:"(anonymous_11)",decl:{start:{line:44,column:22},end:{line:44,column:23}},loc:{start:{line:44,column:28},end:{line:44,column:78}},line:44},"12":{name:"(anonymous_12)",decl:{start:{line:45,column:23},end:{line:45,column:24}},loc:{start:{line:45,column:32},end:{line:48,column:17}},line:45},"13":{name:"(anonymous_13)",decl:{start:{line:52,column:47},end:{line:52,column:48}},loc:{start:{line:53,column:8},end:{line:58,column:14}},line:53},"14":{name:"(anonymous_14)",decl:{start:{line:54,column:18},end:{line:54,column:19}},loc:{start:{line:54,column:24},end:{line:54,column:74}},line:54},"15":{name:"(anonymous_15)",decl:{start:{line:55,column:19},end:{line:55,column:20}},loc:{start:{line:55,column:28},end:{line:58,column:13}},line:55},"16":{name:"(anonymous_16)",decl:{start:{line:61,column:14},end:{line:61,column:15}},loc:{start:{line:61,column:20},end:{line:61,column:37}},line:61}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1fabe783fda41c10850447544d8b47c83b71b4f9"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_4aq962pko=function(){return actualCoverage;};}return actualCoverage;}cov_4aq962pko();cov_4aq962pko().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL:MONGODB_URL}}=(cov_4aq962pko().s[1]++,process);const authenticateUser=(cov_4aq962pko().s[2]++,require('./authenticate-user'));const{random}=(cov_4aq962pko().s[3]++,Math);const{expect}=(cov_4aq962pko().s[4]++,require('chai'));const{mongoose,models:{User}}=(cov_4aq962pko().s[5]++,require('coohappy-data'));const bcrypt=(cov_4aq962pko().s[6]++,require('bcryptjs'));cov_4aq962pko().s[7]++;describe('logic - authenticate user',()=>{cov_4aq962pko().f[0]++;cov_4aq962pko().s[8]++;before(()=>{cov_4aq962pko().f[1]++;cov_4aq962pko().s[9]++;return mongoose.connect(MONGODB_URL);});let name,surname,email,password,userId,hash;cov_4aq962pko().s[10]++;beforeEach(()=>{cov_4aq962pko().f[2]++;cov_4aq962pko().s[11]++;return User.deleteMany().then(()=>{cov_4aq962pko().f[3]++;cov_4aq962pko().s[12]++;name=`name-${random()}`;cov_4aq962pko().s[13]++;surname=`surname-${random()}`;cov_4aq962pko().s[14]++;email=`e-${random()}@mail.com`;cov_4aq962pko().s[15]++;password=`password-${random()}`;cov_4aq962pko().s[16]++;return bcrypt.hash(password,10);}).then(_hash=>{cov_4aq962pko().f[4]++;cov_4aq962pko().s[17]++;return hash=_hash;});});cov_4aq962pko().s[18]++;describe('when user already exists',()=>{cov_4aq962pko().f[5]++;cov_4aq962pko().s[19]++;beforeEach(()=>{cov_4aq962pko().f[6]++;cov_4aq962pko().s[20]++;return User.create({name,surname,email,password:hash}).then(user=>{cov_4aq962pko().f[7]++;cov_4aq962pko().s[21]++;return userId=user.id;});});cov_4aq962pko().s[22]++;it('should succeed on correct credentials',()=>{cov_4aq962pko().f[8]++;cov_4aq962pko().s[23]++;return authenticateUser(email,password).then(_userId=>{cov_4aq962pko().f[9]++;cov_4aq962pko().s[24]++;return expect(_userId).to.equal(userId);});});cov_4aq962pko().s[25]++;it('should fail on wrong password',()=>{cov_4aq962pko().f[10]++;cov_4aq962pko().s[26]++;password+='wrong-';cov_4aq962pko().s[27]++;return authenticateUser(email,password).then(()=>{cov_4aq962pko().f[11]++;cov_4aq962pko().s[28]++;throw new Error('should not reach this point');}).catch(error=>{cov_4aq962pko().f[12]++;cov_4aq962pko().s[29]++;expect(error).to.be.an.instanceof(Error);cov_4aq962pko().s[30]++;expect(error.message).to.equal(`wrong password`);});});});cov_4aq962pko().s[31]++;it('should fail when user does not exist',()=>{cov_4aq962pko().f[13]++;cov_4aq962pko().s[32]++;return authenticateUser(email,password).then(()=>{cov_4aq962pko().f[14]++;cov_4aq962pko().s[33]++;throw new Error('should not reach this point');}).catch(error=>{cov_4aq962pko().f[15]++;cov_4aq962pko().s[34]++;expect(error).to.be.an.instanceof(Error);cov_4aq962pko().s[35]++;expect(error.message).to.equal(`user with e-mail ${email} does not exist`);});});cov_4aq962pko().s[36]++;afterEach(()=>{cov_4aq962pko().f[16]++;cov_4aq962pko().s[37]++;return User.deleteMany();});cov_4aq962pko().s[38]++;after(mongoose.disconnect);});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0ZS11c2VyLnNwZWMuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImVudiIsIlRFU1RfTU9OR09EQl9VUkwiLCJNT05HT0RCX1VSTCIsInByb2Nlc3MiLCJhdXRoZW50aWNhdGVVc2VyIiwicmFuZG9tIiwiTWF0aCIsImV4cGVjdCIsIm1vbmdvb3NlIiwibW9kZWxzIiwiVXNlciIsImJjcnlwdCIsImRlc2NyaWJlIiwiYmVmb3JlIiwiY29ubmVjdCIsIm5hbWUiLCJzdXJuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsInVzZXJJZCIsImhhc2giLCJiZWZvcmVFYWNoIiwiZGVsZXRlTWFueSIsInRoZW4iLCJfaGFzaCIsImNyZWF0ZSIsInVzZXIiLCJpZCIsIml0IiwiX3VzZXJJZCIsInRvIiwiZXF1YWwiLCJFcnJvciIsImNhdGNoIiwiZXJyb3IiLCJiZSIsImFuIiwiaW5zdGFuY2VvZiIsIm1lc3NhZ2UiLCJhZnRlckVhY2giLCJhZnRlciIsImRpc2Nvbm5lY3QiXSwibWFwcGluZ3MiOiJ3ckxBZVk7Z0hBZlpBLE9BQU8sQ0FBQyxRQUFELENBQVAsQ0FBa0JDLE1BQWxCLEdBRUEsS0FBTSxDQUFFQyxHQUFHLENBQUUsQ0FBRUMsZ0JBQWdCLENBQUVDLFdBQXBCLENBQVAsMEJBQTZDQyxPQUE3QyxDQUFOLENBRUEsS0FBTUMsQ0FBQUEsZ0JBQWdCLHlCQUFHTixPQUFPLENBQUMscUJBQUQsQ0FBVixDQUF0QixDQUNBLEtBQU0sQ0FBRU8sTUFBRiwwQkFBYUMsSUFBYixDQUFOLENBQ0EsS0FBTSxDQUFFQyxNQUFGLDBCQUFhVCxPQUFPLENBQUMsTUFBRCxDQUFwQixDQUFOLENBQ0EsS0FBTSxDQUFFVSxRQUFGLENBQVlDLE1BQU0sQ0FBRSxDQUFFQyxJQUFGLENBQXBCLDBCQUFpQ1osT0FBTyxDQUFDLGVBQUQsQ0FBeEMsQ0FBTixDQUNBLEtBQU1hLENBQUFBLE1BQU0seUJBQUdiLE9BQU8sQ0FBQyxVQUFELENBQVYsQ0FBWixD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b0JDLEVBQXBCLENBQXVCQyxVQUF2QixDQUFrQ0wsS0FBbEMsRUFEWSx3QkFFWnpCLE1BQU0sQ0FBQzJCLEtBQUssQ0FBQ0ksT0FBUCxDQUFOLENBQXNCUixFQUF0QixDQUF5QkMsS0FBekIsQ0FBZ0Msb0JBQW1CZCxLQUFNLGlCQUF6RCxFQUNILENBTEwsRUFLTSxDQU5SLENBQUYsQ0F6Q3dDLHdCQWtEeENzQixTQUFTLENBQUMsSUFBTSx1REFBQTdCLENBQUFBLElBQUksQ0FBQ1ksVUFBTCxHQUFpQixDQUF4QixDQUFULENBbER3Qyx3QkFvRHhDa0IsS0FBSyxDQUFDaEMsUUFBUSxDQUFDaUMsVUFBVixDQUFMLENBQ0gsQ0FyRE8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpXG5cbmNvbnN0IHsgZW52OiB7IFRFU1RfTU9OR09EQl9VUkw6IE1PTkdPREJfVVJMIH0gfSA9IHByb2Nlc3NcblxuY29uc3QgYXV0aGVudGljYXRlVXNlciA9IHJlcXVpcmUoJy4vYXV0aGVudGljYXRlLXVzZXInKVxuY29uc3QgeyByYW5kb20gfSA9IE1hdGhcbmNvbnN0IHsgZXhwZWN0IH0gPSByZXF1aXJlKCdjaGFpJylcbmNvbnN0IHsgbW9uZ29vc2UsIG1vZGVsczogeyBVc2VyIH0gfSA9IHJlcXVpcmUoJ2Nvb2hhcHB5LWRhdGEnKVxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0anMnKVxuXG5kZXNjcmliZSgnbG9naWMgLSBhdXRoZW50aWNhdGUgdXNlcicsICgpID0+IHtcbiAgICBiZWZvcmUoKCkgPT4gbW9uZ29vc2UuY29ubmVjdChNT05HT0RCX1VSTCkpXG5cbiAgICBsZXQgbmFtZSwgc3VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCB1c2VySWQsIGhhc2hcblxuICAgIGJlZm9yZUVhY2goKCkgPT5cbiAgICAgICAgVXNlci5kZWxldGVNYW55KClcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBuYW1lID0gYG5hbWUtJHtyYW5kb20oKX1gXG4gICAgICAgICAgICAgICAgc3VybmFtZSA9IGBzdXJuYW1lLSR7cmFuZG9tKCl9YFxuICAgICAgICAgICAgICAgIGVtYWlsID0gYGUtJHtyYW5kb20oKX1AbWFpbC5jb21gXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQgPSBgcGFzc3dvcmQtJHtyYW5kb20oKX1gXG5cbiAgICAgICAgICAgICAgICByZXR1cm4gYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKF9oYXNoID0+IGhhc2ggPSBfaGFzaClcbiAgICApXG5cbiAgICBkZXNjcmliZSgnd2hlbiB1c2VyIGFscmVhZHkgZXhpc3RzJywgKCkgPT4ge1xuICAgICAgICBiZWZvcmVFYWNoKCgpID0+XG4gICAgICAgICAgICBVc2VyLmNyZWF0ZSh7IG5hbWUsIHN1cm5hbWUsIGVtYWlsLCBwYXNzd29yZDogaGFzaCB9KVxuICAgICAgICAgICAgICAgIC50aGVuKHVzZXIgPT4gdXNlcklkID0gdXNlci5pZClcbiAgICAgICAgKVxuXG4gICAgICAgIGl0KCdzaG91bGQgc3VjY2VlZCBvbiBjb3JyZWN0IGNyZWRlbnRpYWxzJywgKCkgPT5cbiAgICAgICAgICAgIGF1dGhlbnRpY2F0ZVVzZXIoZW1haWwsIHBhc3N3b3JkKVxuICAgICAgICAgICAgICAgIC50aGVuKF91c2VySWQgPT4gZXhwZWN0KF91c2VySWQpLnRvLmVxdWFsKHVzZXJJZCkpXG4gICAgICAgIClcblxuICAgICAgICBpdCgnc2hvdWxkIGZhaWwgb24gd3JvbmcgcGFzc3dvcmQnLCAoKSA9PiB7XG4gICAgICAgICAgICBwYXNzd29yZCArPSAnd3JvbmctJ1xuXG4gICAgICAgICAgICByZXR1cm4gYXV0aGVudGljYXRlVXNlcihlbWFpbCwgcGFzc3dvcmQpXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4geyB0aHJvdyBuZXcgRXJyb3IoJ3Nob3VsZCBub3QgcmVhY2ggdGhpcyBwb2ludCcpIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5iZS5hbi5pbnN0YW5jZW9mKEVycm9yKVxuICAgICAgICAgICAgICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG8uZXF1YWwoYHdyb25nIHBhc3N3b3JkYClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIGZhaWwgd2hlbiB1c2VyIGRvZXMgbm90IGV4aXN0JywgKCkgPT5cbiAgICAgICAgYXV0aGVudGljYXRlVXNlcihlbWFpbCwgcGFzc3dvcmQpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7IHRocm93IG5ldyBFcnJvcignc2hvdWxkIG5vdCByZWFjaCB0aGlzIHBvaW50JykgfSlcbiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5iZS5hbi5pbnN0YW5jZW9mKEVycm9yKVxuICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50by5lcXVhbChgdXNlciB3aXRoIGUtbWFpbCAke2VtYWlsfSBkb2VzIG5vdCBleGlzdGApXG4gICAgICAgICAgICB9KVxuICAgIClcblxuICAgIGFmdGVyRWFjaCgoKSA9PiBVc2VyLmRlbGV0ZU1hbnkoKSlcblxuICAgIGFmdGVyKG1vbmdvb3NlLmRpc2Nvbm5lY3QpXG59KSJdfQ==