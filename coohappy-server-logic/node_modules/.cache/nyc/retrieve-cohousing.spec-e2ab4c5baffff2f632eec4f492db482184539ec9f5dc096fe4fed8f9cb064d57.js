function cov_1rmr0jbexy(){var path="/Users/mac/bootcamp/collab/skylab-bootcamp-202004/staff/sergi-ramos/coohappy/coohappy-server-logic/retrieve-cohousing.spec.js";var hash="311812d4faf2d97574d6baa2a1bcf536994d41ee";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/mac/bootcamp/collab/skylab-bootcamp-202004/staff/sergi-ramos/coohappy/coohappy-server-logic/retrieve-cohousing.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:51},end:{line:3,column:58}},"2":{start:{line:6,column:26},end:{line:6,column:57}},"3":{start:{line:7,column:19},end:{line:7,column:23}},"4":{start:{line:8,column:19},end:{line:8,column:34}},"5":{start:{line:9,column:50},end:{line:9,column:74}},"6":{start:{line:10,column:15},end:{line:10,column:34}},"7":{start:{line:11,column:57},end:{line:11,column:84}},"8":{start:{line:12,column:40},end:{line:12,column:67}},"9":{start:{line:14,column:0},end:{line:102,column:2}},"10":{start:{line:15,column:4},end:{line:15,column:47}},"11":{start:{line:15,column:17},end:{line:15,column:46}},"12":{start:{line:19,column:4},end:{line:51,column:5}},"13":{start:{line:20,column:8},end:{line:50,column:14}},"14":{start:{line:26,column:16},end:{line:26,column:41}},"15":{start:{line:27,column:16},end:{line:27,column:47}},"16":{start:{line:28,column:16},end:{line:28,column:48}},"17":{start:{line:29,column:16},end:{line:29,column:49}},"18":{start:{line:31,column:16},end:{line:31,column:50}},"19":{start:{line:32,column:16},end:{line:32,column:45}},"20":{start:{line:33,column:16},end:{line:33,column:33}},"21":{start:{line:34,column:16},end:{line:34,column:41}},"22":{start:{line:35,column:16},end:{line:35,column:51}},"23":{start:{line:36,column:16},end:{line:36,column:30}},"24":{start:{line:38,column:16},end:{line:38,column:48}},"25":{start:{line:40,column:27},end:{line:40,column:39}},"26":{start:{line:41,column:24},end:{line:41,column:77}},"27":{start:{line:44,column:16},end:{line:44,column:32}},"28":{start:{line:45,column:30},end:{line:45,column:54}},"29":{start:{line:46,column:16},end:{line:46,column:131}},"30":{start:{line:49,column:16},end:{line:49,column:54}},"31":{start:{line:53,column:4},end:{line:68,column:6}},"32":{start:{line:55,column:8},end:{line:67,column:9}},"33":{start:{line:56,column:12},end:{line:66,column:17}},"34":{start:{line:59,column:20},end:{line:59,column:46}},"35":{start:{line:60,column:20},end:{line:60,column:83}},"36":{start:{line:61,column:20},end:{line:61,column:77}},"37":{start:{line:62,column:20},end:{line:62,column:80}},"38":{start:{line:63,column:20},end:{line:63,column:69}},"39":{start:{line:64,column:20},end:{line:64,column:76}},"40":{start:{line:70,column:4},end:{line:86,column:6}},"41":{start:{line:72,column:8},end:{line:85,column:10}},"42":{start:{line:74,column:12},end:{line:74,column:40}},"43":{start:{line:75,column:12},end:{line:84,column:13}},"44":{start:{line:76,column:16},end:{line:76,column:59}},"45":{start:{line:80,column:16},end:{line:80,column:49}},"46":{start:{line:81,column:16},end:{line:81,column:38}},"47":{start:{line:82,column:16},end:{line:82,column:100}},"48":{start:{line:88,column:4},end:{line:96,column:6}},"49":{start:{line:89,column:8},end:{line:95,column:10}},"50":{start:{line:91,column:12},end:{line:91,column:86}},"51":{start:{line:91,column:24},end:{line:91,column:44}},"52":{start:{line:92,column:12},end:{line:92,column:92}},"53":{start:{line:92,column:24},end:{line:92,column:47}},"54":{start:{line:93,column:12},end:{line:93,column:102}},"55":{start:{line:93,column:24},end:{line:93,column:52}},"56":{start:{line:99,column:4},end:{line:99,column:77}},"57":{start:{line:99,column:20},end:{line:99,column:76}},"58":{start:{line:101,column:4},end:{line:101,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:14,column:39},end:{line:14,column:40}},loc:{start:{line:14,column:45},end:{line:102,column:1}},line:14},"1":{name:"(anonymous_1)",decl:{start:{line:15,column:11},end:{line:15,column:12}},loc:{start:{line:15,column:17},end:{line:15,column:46}},line:15},"2":{name:"(anonymous_2)",decl:{start:{line:19,column:15},end:{line:19,column:16}},loc:{start:{line:20,column:8},end:{line:50,column:14}},line:20},"3":{name:"(anonymous_3)",decl:{start:{line:25,column:18},end:{line:25,column:19}},loc:{start:{line:25,column:24},end:{line:39,column:13}},line:25},"4":{name:"(anonymous_4)",decl:{start:{line:40,column:18},end:{line:40,column:19}},loc:{start:{line:40,column:27},end:{line:40,column:39}},line:40},"5":{name:"(anonymous_5)",decl:{start:{line:41,column:18},end:{line:41,column:19}},loc:{start:{line:41,column:24},end:{line:41,column:77}},line:41},"6":{name:"(anonymous_6)",decl:{start:{line:43,column:18},end:{line:43,column:19}},loc:{start:{line:43,column:26},end:{line:47,column:13}},line:43},"7":{name:"(anonymous_7)",decl:{start:{line:48,column:18},end:{line:48,column:19}},loc:{start:{line:48,column:31},end:{line:50,column:13}},line:48},"8":{name:"(anonymous_8)",decl:{start:{line:53,column:37},end:{line:53,column:38}},loc:{start:{line:53,column:43},end:{line:68,column:5}},line:53},"9":{name:"(anonymous_9)",decl:{start:{line:55,column:50},end:{line:55,column:51}},loc:{start:{line:56,column:12},end:{line:66,column:17}},line:56},"10":{name:"(anonymous_10)",decl:{start:{line:57,column:22},end:{line:57,column:23}},loc:{start:{line:57,column:37},end:{line:65,column:17}},line:57},"11":{name:"(anonymous_11)",decl:{start:{line:70,column:47},end:{line:70,column:48}},loc:{start:{line:70,column:53},end:{line:86,column:5}},line:70},"12":{name:"(anonymous_12)",decl:{start:{line:72,column:51},end:{line:72,column:52}},loc:{start:{line:72,column:63},end:{line:85,column:9}},line:72},"13":{name:"(anonymous_13)",decl:{start:{line:88,column:28},end:{line:88,column:29}},loc:{start:{line:88,column:34},end:{line:96,column:5}},line:88},"14":{name:"(anonymous_14)",decl:{start:{line:89,column:47},end:{line:89,column:48}},loc:{start:{line:89,column:53},end:{line:95,column:9}},line:89},"15":{name:"(anonymous_15)",decl:{start:{line:91,column:19},end:{line:91,column:20}},loc:{start:{line:91,column:24},end:{line:91,column:44}},line:91},"16":{name:"(anonymous_16)",decl:{start:{line:92,column:19},end:{line:92,column:20}},loc:{start:{line:92,column:24},end:{line:92,column:47}},line:92},"17":{name:"(anonymous_17)",decl:{start:{line:93,column:19},end:{line:93,column:20}},loc:{start:{line:93,column:24},end:{line:93,column:52}},line:93},"18":{name:"(anonymous_18)",decl:{start:{line:99,column:14},end:{line:99,column:15}},loc:{start:{line:99,column:20},end:{line:99,column:76}},line:99}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"311812d4faf2d97574d6baa2a1bcf536994d41ee"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1rmr0jbexy=function(){return actualCoverage;};}return actualCoverage;}cov_1rmr0jbexy();cov_1rmr0jbexy().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL:MONGODB_URL}}=(cov_1rmr0jbexy().s[1]++,process);const retrieveCohousing=(cov_1rmr0jbexy().s[2]++,require('./retrieve-cohousing'));const{random}=(cov_1rmr0jbexy().s[3]++,Math);const{expect}=(cov_1rmr0jbexy().s[4]++,require('chai'));const{mongoose,models:{User,Cohousing}}=(cov_1rmr0jbexy().s[5]++,require('coohappy-data'));const bcrypt=(cov_1rmr0jbexy().s[6]++,require('bcryptjs'));const{errors:{DuplicityError,UnexistenceError}}=(cov_1rmr0jbexy().s[7]++,require('coohappy-commons'));const{utils:{randomAccessCode}}=(cov_1rmr0jbexy().s[8]++,require('coohappy-commons'));cov_1rmr0jbexy().s[9]++;describe('logic - retrieve cohousing',()=>{cov_1rmr0jbexy().f[0]++;cov_1rmr0jbexy().s[10]++;before(()=>{cov_1rmr0jbexy().f[1]++;cov_1rmr0jbexy().s[11]++;return mongoose.connect(MONGODB_URL);});let name,surname,email,password,userId,hash,street,number,city,cohousingId,accesCode,laundryNum;cov_1rmr0jbexy().s[12]++;beforeEach(()=>{cov_1rmr0jbexy().f[2]++;cov_1rmr0jbexy().s[13]++;return Promise.all([User.deleteMany(),Cohousing.deleteMany()]).then(()=>{cov_1rmr0jbexy().f[3]++;cov_1rmr0jbexy().s[14]++;name=`name-${random()}`;cov_1rmr0jbexy().s[15]++;surname=`surname-${random()}`;cov_1rmr0jbexy().s[16]++;email=`email-@${random()}.com`;cov_1rmr0jbexy().s[17]++;password=`password-${random()}`;cov_1rmr0jbexy().s[18]++;nameCohousing=`name-${random()}`;cov_1rmr0jbexy().s[19]++;street=`street-${random()}`;cov_1rmr0jbexy().s[20]++;number=random();cov_1rmr0jbexy().s[21]++;city=`city-${random()}`;cov_1rmr0jbexy().s[22]++;accessCode=randomAccessCode(name);cov_1rmr0jbexy().s[23]++;laundryNum=4;cov_1rmr0jbexy().s[24]++;return bcrypt.hash(password,10);}).then(_hash=>{cov_1rmr0jbexy().f[4]++;cov_1rmr0jbexy().s[25]++;return hash=_hash;}).then(()=>{cov_1rmr0jbexy().f[5]++;cov_1rmr0jbexy().s[26]++;return User.create({name,surname,email,password:hash});}).then(user=>{cov_1rmr0jbexy().f[6]++;cov_1rmr0jbexy().s[27]++;userId=user.id;let address=(cov_1rmr0jbexy().s[28]++,{street,number,city});cov_1rmr0jbexy().s[29]++;return Cohousing.create({name:nameCohousing,address,author:userId,accessCode,members:[userId],laundryNum});}).then(cohousing=>{cov_1rmr0jbexy().f[7]++;cov_1rmr0jbexy().s[30]++;cohousingId=cohousing._id.toString();});});cov_1rmr0jbexy().s[31]++;describe('when cohousing exist',()=>{cov_1rmr0jbexy().f[8]++;cov_1rmr0jbexy().s[32]++;it('should succeed on valid cohousingId',()=>{cov_1rmr0jbexy().f[9]++;cov_1rmr0jbexy().s[33]++;return retrieveCohousing(userId).then(cohousing=>{cov_1rmr0jbexy().f[10]++;cov_1rmr0jbexy().s[34]++;expect(cohousing).to.exist;cov_1rmr0jbexy().s[35]++;expect(cohousing.author.toString()).to.equal(userId.toString());cov_1rmr0jbexy().s[36]++;expect(cohousing.name.toString()).to.equal(nameCohousing);cov_1rmr0jbexy().s[37]++;expect(cohousing.address.street.toString()).to.equal(street);cov_1rmr0jbexy().s[38]++;expect(cohousing.address.number).to.equal(number);cov_1rmr0jbexy().s[39]++;expect(cohousing.address.city.toString()).to.equal(city);});});});cov_1rmr0jbexy().s[40]++;describe('when coohousing does not exist',()=>{cov_1rmr0jbexy().f[11]++;cov_1rmr0jbexy().s[41]++;it('should fail on innexitence cohousing',async()=>{cov_1rmr0jbexy().f[12]++;let cohousing;cov_1rmr0jbexy().s[42]++;await Cohousing.deleteMany();cov_1rmr0jbexy().s[43]++;try{cov_1rmr0jbexy().s[44]++;cohousing=await retrieveCohousing(userId);}catch(error){cov_1rmr0jbexy().s[45]++;expect(cohousing).to.be.undefined;cov_1rmr0jbexy().s[46]++;expect(error).to.exist;cov_1rmr0jbexy().s[47]++;expect(error.message).to.equal(`cohousing of user with id ${userId} does not exist`);}});});cov_1rmr0jbexy().s[48]++;describe('sync errors',()=>{cov_1rmr0jbexy().f[13]++;cov_1rmr0jbexy().s[49]++;it('should throw error on wrong type',()=>{cov_1rmr0jbexy().f[14]++;cov_1rmr0jbexy().s[50]++;expect(()=>{cov_1rmr0jbexy().f[15]++;cov_1rmr0jbexy().s[51]++;return retrieveCohousing(2);}).to.throw(TypeError,'2 is not a string');cov_1rmr0jbexy().s[52]++;expect(()=>{cov_1rmr0jbexy().f[16]++;cov_1rmr0jbexy().s[53]++;return retrieveCohousing(true);}).to.throw(TypeError,'true is not a string');cov_1rmr0jbexy().s[54]++;expect(()=>{cov_1rmr0jbexy().f[17]++;cov_1rmr0jbexy().s[55]++;return retrieveCohousing(undefined);}).to.throw(TypeError,'undefined is not a string');});});cov_1rmr0jbexy().s[56]++;afterEach(()=>{cov_1rmr0jbexy().f[18]++;cov_1rmr0jbexy().s[57]++;return Promise.all([User.deleteMany(),Cohousing.deleteMany()]);});cov_1rmr0jbexy().s[58]++;after(mongoose.disconnect);});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLWNvaG91c2luZy5zcGVjLmpzIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJjb25maWciLCJlbnYiLCJURVNUX01PTkdPREJfVVJMIiwiTU9OR09EQl9VUkwiLCJwcm9jZXNzIiwicmV0cmlldmVDb2hvdXNpbmciLCJyYW5kb20iLCJNYXRoIiwiZXhwZWN0IiwibW9uZ29vc2UiLCJtb2RlbHMiLCJVc2VyIiwiQ29ob3VzaW5nIiwiYmNyeXB0IiwiZXJyb3JzIiwiRHVwbGljaXR5RXJyb3IiLCJVbmV4aXN0ZW5jZUVycm9yIiwidXRpbHMiLCJyYW5kb21BY2Nlc3NDb2RlIiwiZGVzY3JpYmUiLCJiZWZvcmUiLCJjb25uZWN0IiwibmFtZSIsInN1cm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwidXNlcklkIiwiaGFzaCIsInN0cmVldCIsIm51bWJlciIsImNpdHkiLCJjb2hvdXNpbmdJZCIsImFjY2VzQ29kZSIsImxhdW5kcnlOdW0iLCJiZWZvcmVFYWNoIiwiUHJvbWlzZSIsImFsbCIsImRlbGV0ZU1hbnkiLCJ0aGVuIiwibmFtZUNvaG91c2luZyIsImFjY2Vzc0NvZGUiLCJfaGFzaCIsImNyZWF0ZSIsInVzZXIiLCJpZCIsImFkZHJlc3MiLCJhdXRob3IiLCJtZW1iZXJzIiwiY29ob3VzaW5nIiwiX2lkIiwidG9TdHJpbmciLCJpdCIsInRvIiwiZXhpc3QiLCJlcXVhbCIsImVycm9yIiwiYmUiLCJ1bmRlZmluZWQiLCJtZXNzYWdlIiwidGhyb3ciLCJUeXBlRXJyb3IiLCJhZnRlckVhY2giLCJhZnRlciIsImRpc2Nvbm5lY3QiXSwibWFwcGluZ3MiOiI0dk9BZVk7bUhBZlpBLE9BQU8sQ0FBQyxRQUFELENBQVAsQ0FBa0JDLE1BQWxCLEdBRUEsS0FBTSxDQUFFQyxHQUFHLENBQUUsQ0FBRUMsZ0JBQWdCLENBQUVDLFdBQXBCLENBQVAsMkJBQTZDQyxPQUE3QyxDQUFOLENBR0EsS0FBTUMsQ0FBQUEsaUJBQWlCLDBCQUFHTixPQUFPLENBQUMsc0JB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aUJBQWlCLENBQUMsSUFBRCxDQUFqQixDQUF1QixDQUE3QixDQUFOLENBQXFDK0MsRUFBckMsQ0FBd0NPLEtBQXhDLENBQThDQyxTQUE5QyxDQUF5RCxzQkFBekQsRUFIeUMseUJBSXpDcEQsTUFBTSxDQUFDLElBQUsseURBQUFILENBQUFBLGlCQUFpQixDQUFDb0QsU0FBRCxDQUFqQixDQUE0QixDQUFsQyxDQUFOLENBQTBDTCxFQUExQyxDQUE2Q08sS0FBN0MsQ0FBbURDLFNBQW5ELENBQThELDJCQUE5RCxFQUVILENBTkMsQ0FBRixDQU9ILENBUk8sQ0FBUixDQTFFeUMseUJBcUZ6Q0MsU0FBUyxDQUFDLElBQU0seURBQUExQixDQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxDQUFDekIsSUFBSSxDQUFDMEIsVUFBTCxFQUFELENBQW9CekIsU0FBUyxDQUFDeUIsVUFBVixFQUFwQixDQUFaLEVBQXdELENBQS9ELENBQVQsQ0FyRnlDLHlCQXVGekN5QixLQUFLLENBQUNyRCxRQUFRLENBQUNzRCxVQUFWLENBQUwsQ0FDSCxDQXhGTyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZSgnZG90ZW52JykuY29uZmlnKClcblxuY29uc3QgeyBlbnY6IHsgVEVTVF9NT05HT0RCX1VSTDogTU9OR09EQl9VUkwgfSB9ID0gcHJvY2Vzc1xuXG5cbmNvbnN0IHJldHJpZXZlQ29ob3VzaW5nID0gcmVxdWlyZSgnLi9yZXRyaWV2ZS1jb2hvdXNpbmcnKVxuY29uc3QgeyByYW5kb20gfSA9IE1hdGhcbmNvbnN0IHsgZXhwZWN0IH0gPSByZXF1aXJlKCdjaGFpJylcbmNvbnN0IHsgbW9uZ29vc2UsIG1vZGVsczogeyBVc2VyLCBDb2hvdXNpbmcgfSB9ID0gcmVxdWlyZSgnY29vaGFwcHktZGF0YScpXG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHRqcycpXG5jb25zdCB7IGVycm9yczogeyBEdXBsaWNpdHlFcnJvciwgVW5leGlzdGVuY2VFcnJvciB9IH0gPSByZXF1aXJlKCdjb29oYXBweS1jb21tb25zJylcbmNvbnN0IHsgdXRpbHM6IHsgcmFuZG9tQWNjZXNzQ29kZSB9IH0gPSByZXF1aXJlKCdjb29oYXBweS1jb21tb25zJylcblxuZGVzY3JpYmUoJ2xvZ2ljIC0gcmV0cmlldmUgY29ob3VzaW5nJywgKCkgPT4ge1xuICAgIGJlZm9yZSgoKSA9PiBtb25nb29zZS5jb25uZWN0KE1PTkdPREJfVVJMKSlcblxuICAgIGxldCBuYW1lLCBzdXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIHVzZXJJZCwgaGFzaCwgc3RyZWV0LCBudW1iZXIsIGNpdHksIGNvaG91c2luZ0lkLCBhY2Nlc0NvZGUsIGxhdW5kcnlOdW1cblxuICAgIGJlZm9yZUVhY2goKCkgPT5cbiAgICAgICAgUHJvbWlzZS5hbGwoXG4gICAgICAgICAgICBbVXNlci5kZWxldGVNYW55KCksXG4gICAgICAgICAgICBDb2hvdXNpbmcuZGVsZXRlTWFueSgpXG4gICAgICAgICAgICBdKVxuXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgbmFtZSA9IGBuYW1lLSR7cmFuZG9tKCl9YFxuICAgICAgICAgICAgICAgIHN1cm5hbWUgPSBgc3VybmFtZS0ke3JhbmRvbSgpfWBcbiAgICAgICAgICAgICAgICBlbWFpbCA9IGBlbWFpbC1AJHtyYW5kb20oKX0uY29tYFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkID0gYHBhc3N3b3JkLSR7cmFuZG9tKCl9YFxuXG4gICAgICAgICAgICAgICAgbmFtZUNvaG91c2luZyA9IGBuYW1lLSR7cmFuZG9tKCl9YFxuICAgICAgICAgICAgICAgIHN0cmVldCA9IGBzdHJlZXQtJHtyYW5kb20oKX1gXG4gICAgICAgICAgICAgICAgbnVtYmVyID0gcmFuZG9tKClcbiAgICAgICAgICAgICAgICBjaXR5ID0gYGNpdHktJHtyYW5kb20oKX1gXG4gICAgICAgICAgICAgICAgYWNjZXNzQ29kZSA9IHJhbmRvbUFjY2Vzc0NvZGUobmFtZSlcbiAgICAgICAgICAgICAgICBsYXVuZHJ5TnVtID0gNFxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihfaGFzaCA9PiBoYXNoID0gX2hhc2gpXG4gICAgICAgICAgICAudGhlbigoKSA9PiBVc2VyLmNyZWF0ZSh7IG5hbWUsIHN1cm5hbWUsIGVtYWlsLCBwYXNzd29yZDogaGFzaCB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLnRoZW4odXNlciA9PiB7XG4gICAgICAgICAgICAgICAgdXNlcklkID0gdXNlci5pZFxuICAgICAgICAgICAgICAgIGxldCBhZGRyZXNzID0geyBzdHJlZXQsIG51bWJlciwgY2l0eSB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIENvaG91c2luZy5jcmVhdGUoeyBuYW1lOiBuYW1lQ29ob3VzaW5nLCBhZGRyZXNzLCBhdXRob3I6IHVzZXJJZCwgYWNjZXNzQ29kZSwgbWVtYmVyczogW3VzZXJJZF0sIGxhdW5kcnlOdW19KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGNvaG91c2luZyA9PiB7XG4gICAgICAgICAgICAgICAgY29ob3VzaW5nSWQgPSBjb2hvdXNpbmcuX2lkLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH0pXG4gICAgKVxuXG4gICAgZGVzY3JpYmUoJ3doZW4gY29ob3VzaW5nIGV4aXN0JywgKCkgPT4ge1xuXG4gICAgICAgIGl0KCdzaG91bGQgc3VjY2VlZCBvbiB2YWxpZCBjb2hvdXNpbmdJZCcsICgpID0+XG4gICAgICAgICAgICByZXRyaWV2ZUNvaG91c2luZyh1c2VySWQpXG4gICAgICAgICAgICAgICAgLnRoZW4oKGNvaG91c2luZykgPT4ge1xuXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChjb2hvdXNpbmcpLnRvLmV4aXN0XG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChjb2hvdXNpbmcuYXV0aG9yLnRvU3RyaW5nKCkpLnRvLmVxdWFsKHVzZXJJZC50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgICAgICBleHBlY3QoY29ob3VzaW5nLm5hbWUudG9TdHJpbmcoKSkudG8uZXF1YWwobmFtZUNvaG91c2luZylcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGNvaG91c2luZy5hZGRyZXNzLnN0cmVldC50b1N0cmluZygpKS50by5lcXVhbChzdHJlZXQpXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChjb2hvdXNpbmcuYWRkcmVzcy5udW1iZXIpLnRvLmVxdWFsKG51bWJlcilcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGNvaG91c2luZy5hZGRyZXNzLmNpdHkudG9TdHJpbmcoKSkudG8uZXF1YWwoY2l0eSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICApXG4gICAgfSlcblxuICAgIGRlc2NyaWJlKCd3aGVuIGNvb2hvdXNpbmcgZG9lcyBub3QgZXhpc3QnLCAoKSA9PiB7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBmYWlsIG9uIGlubmV4aXRlbmNlIGNvaG91c2luZycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGxldCBjb2hvdXNpbmdcbiAgICAgICAgICAgIGF3YWl0IENvaG91c2luZy5kZWxldGVNYW55KClcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29ob3VzaW5nID0gYXdhaXQgcmV0cmlldmVDb2hvdXNpbmcodXNlcklkKVxuXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuXG4gICAgICAgICAgICAgICAgZXhwZWN0KGNvaG91c2luZykudG8uYmUudW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgZXhwZWN0KGVycm9yKS50by5leGlzdFxuICAgICAgICAgICAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50by5lcXVhbChgY29ob3VzaW5nIG9mIHVzZXIgd2l0aCBpZCAke3VzZXJJZH0gZG9lcyBub3QgZXhpc3RgKVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSlcbiAgICBcbiAgICBkZXNjcmliZSgnc3luYyBlcnJvcnMnLCAoKSA9PiB7XG4gICAgICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3Igb24gd3JvbmcgdHlwZScsICgpID0+IHtcblxuICAgICAgICAgICAgZXhwZWN0KCgpPT4gcmV0cmlldmVDb2hvdXNpbmcoMikpLnRvLnRocm93KFR5cGVFcnJvciwgJzIgaXMgbm90IGEgc3RyaW5nJylcbiAgICAgICAgICAgIGV4cGVjdCgoKT0+IHJldHJpZXZlQ29ob3VzaW5nKHRydWUpKS50by50aHJvdyhUeXBlRXJyb3IsICd0cnVlIGlzIG5vdCBhIHN0cmluZycpXG4gICAgICAgICAgICBleHBlY3QoKCk9PiByZXRyaWV2ZUNvaG91c2luZyh1bmRlZmluZWQpKS50by50aHJvdyhUeXBlRXJyb3IsICd1bmRlZmluZWQgaXMgbm90IGEgc3RyaW5nJylcbiAgICAgICAgICAgXG4gICAgICAgIH0pXG4gICAgfSlcblxuXG4gICAgYWZ0ZXJFYWNoKCgpID0+IFByb21pc2UuYWxsKFtVc2VyLmRlbGV0ZU1hbnkoKSwgQ29ob3VzaW5nLmRlbGV0ZU1hbnkoKV0pKVxuXG4gICAgYWZ0ZXIobW9uZ29vc2UuZGlzY29ubmVjdClcbn0pIl19