function cov_2bkbsm3qgf(){var path="/Users/mac/bootcamp/collab/skylab-bootcamp-202004/staff/sergi-ramos/coohappy/coohappy-server-logic/delete-date-laundry.js";var hash="828f8caf48c782f5104766f35e0ba175be915498";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/mac/bootcamp/collab/skylab-bootcamp-202004/staff/sergi-ramos/coohappy/coohappy-server-logic/delete-date-laundry.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:44}},"1":{start:{line:2,column:0},end:{line:2,column:42}},"2":{start:{line:3,column:56},end:{line:3,column:83}},"3":{start:{line:4,column:34},end:{line:4,column:58}},"4":{start:{line:5,column:35},end:{line:5,column:59}},"5":{start:{line:7,column:0},end:{line:24,column:1}},"6":{start:{line:9,column:4},end:{line:9,column:35}},"7":{start:{line:11,column:4},end:{line:23,column:8}},"8":{start:{line:13,column:26},end:{line:13,column:82}},"9":{start:{line:14,column:8},end:{line:14,column:108}},"10":{start:{line:14,column:24},end:{line:14,column:108}},"11":{start:{line:16,column:8},end:{line:21,column:9}},"12":{start:{line:16,column:53},end:{line:16,column:80}},"13":{start:{line:17,column:12},end:{line:17,column:109}},"14":{start:{line:20,column:12},end:{line:20,column:97}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:17},end:{line:7,column:18}},loc:{start:{line:7,column:29},end:{line:24,column:1}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:11,column:12},end:{line:11,column:13}},loc:{start:{line:11,column:24},end:{line:23,column:5}},line:11},"2":{name:"(anonymous_2)",decl:{start:{line:16,column:35},end:{line:16,column:36}},loc:{start:{line:16,column:53},end:{line:16,column:80}},line:16}},branchMap:{"0":{loc:{start:{line:14,column:8},end:{line:14,column:108}},type:"if",locations:[{start:{line:14,column:8},end:{line:14,column:108}},{start:{line:14,column:8},end:{line:14,column:108}}],line:14},"1":{loc:{start:{line:16,column:8},end:{line:21,column:9}},type:"if",locations:[{start:{line:16,column:8},end:{line:21,column:9}},{start:{line:16,column:8},end:{line:21,column:9}}],line:16}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"828f8caf48c782f5104766f35e0ba175be915498"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2bkbsm3qgf=function(){return actualCoverage;};}return actualCoverage;}cov_2bkbsm3qgf();cov_2bkbsm3qgf().s[0]++;require('coohappy-commons/polyfills/string');cov_2bkbsm3qgf().s[1]++;require('coohappy-commons/polyfills/json');const{errors:{UnexistenceError,DuplicityError}}=(cov_2bkbsm3qgf().s[2]++,require('coohappy-commons'));const{models:{Cohousing}}=(cov_2bkbsm3qgf().s[3]++,require('coohappy-data'));const{mongoose:{ObjectId}}=(cov_2bkbsm3qgf().s[4]++,require('coohappy-data'));cov_2bkbsm3qgf().s[5]++;module.exports=userId=>{cov_2bkbsm3qgf().f[0]++;cov_2bkbsm3qgf().s[6]++;String.validate.notVoid(userId);cov_2bkbsm3qgf().s[7]++;return(async()=>{cov_2bkbsm3qgf().f[1]++;const cohousing=(cov_2bkbsm3qgf().s[8]++,await Cohousing.findOne({'members':ObjectId(userId)}));cov_2bkbsm3qgf().s[9]++;if(!cohousing){cov_2bkbsm3qgf().b[0][0]++;cov_2bkbsm3qgf().s[10]++;throw new UnexistenceError(`There is no cohousing with a user with an id ${userId}`);}else{cov_2bkbsm3qgf().b[0][1]++;}cov_2bkbsm3qgf().s[11]++;if(cohousing.laundry.some(({user:_user})=>{cov_2bkbsm3qgf().f[2]++;cov_2bkbsm3qgf().s[12]++;return _user.toString()===userId;})){cov_2bkbsm3qgf().b[1][0]++;cov_2bkbsm3qgf().s[13]++;await Cohousing.findOneAndUpdate({'members':userId},{$pull:{laundry:{user:userId}}});}else{cov_2bkbsm3qgf().b[1][1]++;cov_2bkbsm3qgf().s[14]++;throw new DuplicityError(`User with id ${userId} has not an hour in the laundry yet`);}})();};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlbGV0ZS1kYXRlLWxhdW5kcnkuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImVycm9ycyIsIlVuZXhpc3RlbmNlRXJyb3IiLCJEdXBsaWNpdHlFcnJvciIsIm1vZGVscyIsIkNvaG91c2luZyIsIm1vbmdvb3NlIiwiT2JqZWN0SWQiLCJtb2R1bGUiLCJleHBvcnRzIiwidXNlcklkIiwiU3RyaW5nIiwidmFsaWRhdGUiLCJub3RWb2lkIiwiY29ob3VzaW5nIiwiZmluZE9uZSIsImxhdW5kcnkiLCJzb21lIiwidXNlciIsIl91c2VyIiwidG9TdHJpbmciLCJmaW5kT25lQW5kVXBkYXRlIiwiJHB1bGwiXSwibWFwcGluZ3MiOiJrOUVBZVk7bUhBZlpBLE9BQU8sQ0FBQyxtQ0FBRCxDQUFQLEMsd0JBQ0FBLE9BQU8sQ0FBQyxpQ0FBRCxDQUFQLENBQ0EsS0FBTSxDQUFFQyxNQUFNLENBQUUsQ0FBRUMsZ0JBQUYsQ0FBb0JDLGNBQXBCLENBQVYsMkJBQWtESCxPQUFPLENBQUMsa0JBQUQsQ0FBekQsQ0FBTixDQUNBLEtBQU0sQ0FBRUksTUFBTSxDQUFFLENBQUVDLFNBQUYsQ0FBViwyQkFBNEJMLE9BQU8sQ0FBQyxlQUFELENBQW5DLENBQU4sQ0FDQSxLQUFNLENBQUVNLFFBQVEsQ0FBRSxDQUFFQyxRQUFGLENBQVosMkJBQTZCUCxPQUFPLENBQUMsZUFBRCxDQUFwQyxDQUFOLEMsd0JBRUFRLE1BQU0sQ0FBQ0MsT0FBUCxDQUFrQkMsTUFBRCxFQUFZLGlEQUV6QkMsTUFBTSxDQUFDQyxRQUFQLENBQWdCQyxPQUFoQixDQUF3QkgsTUFBeEIsRUFGeUIsd0JBSXpCLE1BQU8sQ0FBQyxTQUFZLHlCQUVoQixLQUFNSSxDQUFBQSxTQUFTLDBCQUFHLEtBQU1ULENBQUFBLFNBQVMsQ0FBQ1UsT0FBVixDQUFrQixDQUFFLFVBQVdSLFFBQVEsQ0FBQ0csTUFBRCxDQUFyQixDQUFsQixDQUFULENBQWYsQ0FGZ0Isd0JBR2hCLEdBQUksQ0FBQ0ksU0FBTCxDQUFnQiwwREFBTSxJQUFJWixDQUFBQSxnQkFBSixDQUFzQixnREFBK0NRLE1BQU8sRUFBNUUsQ0FBTixDQUFvRixDQUFwRyxpQ0FIZ0IseUJBS2hCLEdBQUlJLFNBQVMsQ0FBQ0UsT0FBVixDQUFrQkMsSUFBbEIsQ0FBdUIsQ0FBQyxDQUFDQyxJQUFJLENBQUNDLEtBQU4sQ0FBRCxHQUFrQix3REFBQUEsQ0FBQUEsS0FBSyxDQUFDQyxRQUFOLEtBQXFCVixNQUFyQixDQUEyQixDQUFwRSxDQUFKLENBQTJFLHFEQUN2RSxLQUFNTCxDQUFBQSxTQUFTLENBQUNnQixnQkFBVixDQUEyQixDQUFFLFVBQVdYLE1BQWIsQ0FBM0IsQ0FBa0QsQ0FBRVksS0FBSyxDQUFFLENBQUVOLE9BQU8sQ0FBRSxDQUFFRSxJQUFJLENBQUVSLE1BQVIsQ0FBWCxDQUFULENBQWxELENBQU4sQ0FFSCxDQUhELElBR0sscURBQ0QsS0FBTSxJQUFJUCxDQUFBQSxjQUFKLENBQW9CLGdCQUFlTyxNQUFPLHFDQUExQyxDQUFOLENBQ0gsQ0FFSixDQVpNLEdBQVAsQ0FhSCxDQWpCRCIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJ2Nvb2hhcHB5LWNvbW1vbnMvcG9seWZpbGxzL3N0cmluZycpXG5yZXF1aXJlKCdjb29oYXBweS1jb21tb25zL3BvbHlmaWxscy9qc29uJylcbmNvbnN0IHsgZXJyb3JzOiB7IFVuZXhpc3RlbmNlRXJyb3IsIER1cGxpY2l0eUVycm9yfSB9ID0gcmVxdWlyZSgnY29vaGFwcHktY29tbW9ucycpXG5jb25zdCB7IG1vZGVsczogeyBDb2hvdXNpbmcgfSB9ID0gcmVxdWlyZSgnY29vaGFwcHktZGF0YScpXG5jb25zdCB7IG1vbmdvb3NlOiB7IE9iamVjdElkIH0gfSA9IHJlcXVpcmUoJ2Nvb2hhcHB5LWRhdGEnKVxuXG5tb2R1bGUuZXhwb3J0cyA9ICh1c2VySWQpID0+IHtcblxuICAgIFN0cmluZy52YWxpZGF0ZS5ub3RWb2lkKHVzZXJJZClcbiAgXG4gICAgcmV0dXJuIChhc3luYyAoKSA9PiB7XG5cbiAgICAgICAgY29uc3QgY29ob3VzaW5nID0gYXdhaXQgQ29ob3VzaW5nLmZpbmRPbmUoeyAnbWVtYmVycyc6IE9iamVjdElkKHVzZXJJZCkgfSlcbiAgICAgICAgaWYgKCFjb2hvdXNpbmcpIHRocm93IG5ldyBVbmV4aXN0ZW5jZUVycm9yKGBUaGVyZSBpcyBubyBjb2hvdXNpbmcgd2l0aCBhIHVzZXIgd2l0aCBhbiBpZCAke3VzZXJJZH1gKVxuXG4gICAgICAgIGlmIChjb2hvdXNpbmcubGF1bmRyeS5zb21lKCh7dXNlcjpfdXNlcn0pID0+IF91c2VyLnRvU3RyaW5nKCkgPT09IHVzZXJJZCkpIHsgXG4gICAgICAgICAgICBhd2FpdCBDb2hvdXNpbmcuZmluZE9uZUFuZFVwZGF0ZSh7ICdtZW1iZXJzJzogdXNlcklkIH0sIHsgJHB1bGw6IHsgbGF1bmRyeTogeyB1c2VyOiB1c2VySWQgfSB9IH0pXG4gICAgIFxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHRocm93IG5ldyBEdXBsaWNpdHlFcnJvcihgVXNlciB3aXRoIGlkICR7dXNlcklkfSBoYXMgbm90IGFuIGhvdXIgaW4gdGhlIGxhdW5kcnkgeWV0YClcbiAgICAgICAgfVxuXG4gICAgfSkoKVxufSJdfQ==